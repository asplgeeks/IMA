{"ast":null,"code":"/**\r\n* Create an event emitter with namespaces\r\n* @name createNamespaceEmitter\r\n* @example\r\n* var emitter = require('./index')()\r\n*\r\n* emitter.on('*', function () {\r\n*   console.log('all events emitted', this.event)\r\n* })\r\n*\r\n* emitter.on('example', function () {\r\n*   console.log('example event emitted')\r\n* })\r\n*/\nmodule.exports = function createNamespaceEmitter() {\n  var emitter = {};\n\n  var _fns = emitter._fns = {};\n  /**\r\n  * Emit an event. Optionally namespace the event. Handlers are fired in the order in which they were added with exact matches taking precedence. Separate the namespace and event with a `:`\r\n  * @name emit\r\n  * @param {String} event – the name of the event, with optional namespace\r\n  * @param {...*} data – up to 6 arguments that are passed to the event listener\r\n  * @example\r\n  * emitter.emit('example')\r\n  * emitter.emit('demo:test')\r\n  * emitter.emit('data', { example: true}, 'a string', 1)\r\n  */\n\n\n  emitter.emit = function emit(event, arg1, arg2, arg3, arg4, arg5, arg6) {\n    var toEmit = getListeners(event);\n\n    if (toEmit.length) {\n      emitAll(event, toEmit, [arg1, arg2, arg3, arg4, arg5, arg6]);\n    }\n  };\n  /**\r\n  * Create en event listener.\r\n  * @name on\r\n  * @param {String} event\r\n  * @param {Function} fn\r\n  * @example\r\n  * emitter.on('example', function () {})\r\n  * emitter.on('demo', function () {})\r\n  */\n\n\n  emitter.on = function on(event, fn) {\n    if (!_fns[event]) {\n      _fns[event] = [];\n    }\n\n    _fns[event].push(fn);\n  };\n  /**\r\n  * Create en event listener that fires once.\r\n  * @name once\r\n  * @param {String} event\r\n  * @param {Function} fn\r\n  * @example\r\n  * emitter.once('example', function () {})\r\n  * emitter.once('demo', function () {})\r\n  */\n\n\n  emitter.once = function once(event, fn) {\n    function one() {\n      fn.apply(this, arguments);\n      emitter.off(event, one);\n    }\n\n    this.on(event, one);\n  };\n  /**\r\n  * Stop listening to an event. Stop all listeners on an event by only passing the event name. Stop a single listener by passing that event handler as a callback.\r\n  * You must be explicit about what will be unsubscribed: `emitter.off('demo')` will unsubscribe an `emitter.on('demo')` listener,\r\n  * `emitter.off('demo:example')` will unsubscribe an `emitter.on('demo:example')` listener\r\n  * @name off\r\n  * @param {String} event\r\n  * @param {Function} [fn] – the specific handler\r\n  * @example\r\n  * emitter.off('example')\r\n  * emitter.off('demo', function () {})\r\n  */\n\n\n  emitter.off = function off(event, fn) {\n    var keep = [];\n\n    if (event && fn) {\n      var fns = this._fns[event];\n      var i = 0;\n      var l = fns ? fns.length : 0;\n\n      for (i; i < l; i++) {\n        if (fns[i] !== fn) {\n          keep.push(fns[i]);\n        }\n      }\n    }\n\n    keep.length ? this._fns[event] = keep : delete this._fns[event];\n  };\n\n  function getListeners(e) {\n    var out = _fns[e] ? _fns[e] : [];\n    var idx = e.indexOf(':');\n    var args = idx === -1 ? [e] : [e.substring(0, idx), e.substring(idx + 1)];\n    var keys = Object.keys(_fns);\n    var i = 0;\n    var l = keys.length;\n\n    for (i; i < l; i++) {\n      var key = keys[i];\n\n      if (key === '*') {\n        out = out.concat(_fns[key]);\n      }\n\n      if (args.length === 2 && args[0] === key) {\n        out = out.concat(_fns[key]);\n        break;\n      }\n    }\n\n    return out;\n  }\n\n  function emitAll(e, fns, args) {\n    var i = 0;\n    var l = fns.length;\n\n    for (i; i < l; i++) {\n      if (!fns[i]) break;\n      fns[i].event = e;\n      fns[i].apply(fns[i], args);\n    }\n  }\n\n  return emitter;\n};","map":{"version":3,"sources":["D:/nodejs/IMA/node_modules/namespace-emitter/index.js"],"names":["module","exports","createNamespaceEmitter","emitter","_fns","emit","event","arg1","arg2","arg3","arg4","arg5","arg6","toEmit","getListeners","length","emitAll","on","fn","push","once","one","apply","arguments","off","keep","fns","i","l","e","out","idx","indexOf","args","substring","keys","Object","key","concat"],"mappings":"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","sourcesContent":["/**\r\n* Create an event emitter with namespaces\r\n* @name createNamespaceEmitter\r\n* @example\r\n* var emitter = require('./index')()\r\n*\r\n* emitter.on('*', function () {\r\n*   console.log('all events emitted', this.event)\r\n* })\r\n*\r\n* emitter.on('example', function () {\r\n*   console.log('example event emitted')\r\n* })\r\n*/\r\nmodule.exports = function createNamespaceEmitter () {\r\n  var emitter = {}\r\n  var _fns = emitter._fns = {}\r\n\r\n  /**\r\n  * Emit an event. Optionally namespace the event. Handlers are fired in the order in which they were added with exact matches taking precedence. Separate the namespace and event with a `:`\r\n  * @name emit\r\n  * @param {String} event – the name of the event, with optional namespace\r\n  * @param {...*} data – up to 6 arguments that are passed to the event listener\r\n  * @example\r\n  * emitter.emit('example')\r\n  * emitter.emit('demo:test')\r\n  * emitter.emit('data', { example: true}, 'a string', 1)\r\n  */\r\n  emitter.emit = function emit (event, arg1, arg2, arg3, arg4, arg5, arg6) {\r\n    var toEmit = getListeners(event)\r\n\r\n    if (toEmit.length) {\r\n      emitAll(event, toEmit, [arg1, arg2, arg3, arg4, arg5, arg6])\r\n    }\r\n  }\r\n\r\n  /**\r\n  * Create en event listener.\r\n  * @name on\r\n  * @param {String} event\r\n  * @param {Function} fn\r\n  * @example\r\n  * emitter.on('example', function () {})\r\n  * emitter.on('demo', function () {})\r\n  */\r\n  emitter.on = function on (event, fn) {\r\n    if (!_fns[event]) {\r\n      _fns[event] = []\r\n    }\r\n\r\n    _fns[event].push(fn)\r\n  }\r\n\r\n  /**\r\n  * Create en event listener that fires once.\r\n  * @name once\r\n  * @param {String} event\r\n  * @param {Function} fn\r\n  * @example\r\n  * emitter.once('example', function () {})\r\n  * emitter.once('demo', function () {})\r\n  */\r\n  emitter.once = function once (event, fn) {\r\n    function one () {\r\n      fn.apply(this, arguments)\r\n      emitter.off(event, one)\r\n    }\r\n    this.on(event, one)\r\n  }\r\n\r\n  /**\r\n  * Stop listening to an event. Stop all listeners on an event by only passing the event name. Stop a single listener by passing that event handler as a callback.\r\n  * You must be explicit about what will be unsubscribed: `emitter.off('demo')` will unsubscribe an `emitter.on('demo')` listener,\r\n  * `emitter.off('demo:example')` will unsubscribe an `emitter.on('demo:example')` listener\r\n  * @name off\r\n  * @param {String} event\r\n  * @param {Function} [fn] – the specific handler\r\n  * @example\r\n  * emitter.off('example')\r\n  * emitter.off('demo', function () {})\r\n  */\r\n  emitter.off = function off (event, fn) {\r\n    var keep = []\r\n\r\n    if (event && fn) {\r\n      var fns = this._fns[event]\r\n      var i = 0\r\n      var l = fns ? fns.length : 0\r\n\r\n      for (i; i < l; i++) {\r\n        if (fns[i] !== fn) {\r\n          keep.push(fns[i])\r\n        }\r\n      }\r\n    }\r\n\r\n    keep.length ? this._fns[event] = keep : delete this._fns[event]\r\n  }\r\n\r\n  function getListeners (e) {\r\n    var out = _fns[e] ? _fns[e] : []\r\n    var idx = e.indexOf(':')\r\n    var args = (idx === -1) ? [e] : [e.substring(0, idx), e.substring(idx + 1)]\r\n\r\n    var keys = Object.keys(_fns)\r\n    var i = 0\r\n    var l = keys.length\r\n\r\n    for (i; i < l; i++) {\r\n      var key = keys[i]\r\n      if (key === '*') {\r\n        out = out.concat(_fns[key])\r\n      }\r\n\r\n      if (args.length === 2 && args[0] === key) {\r\n        out = out.concat(_fns[key])\r\n        break\r\n      }\r\n    }\r\n\r\n    return out\r\n  }\r\n\r\n  function emitAll (e, fns, args) {\r\n    var i = 0\r\n    var l = fns.length\r\n\r\n    for (i; i < l; i++) {\r\n      if (!fns[i]) break\r\n      fns[i].event = e\r\n      fns[i].apply(fns[i], args)\r\n    }\r\n  }\r\n\r\n  return emitter\r\n}\r\n"]},"metadata":{},"sourceType":"script"}