{"ast":null,"code":"import _defineProperty from\"D:/nodejs/IMA/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"D:/nodejs/IMA/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"D:/nodejs/IMA/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// ** React Imports\nimport{Fragment,useEffect,useState,useRef}from'react';import ReactDOM from'react-dom';import{useHistory}from'react-router-dom';// ** Third Party Components\nimport classnames from'classnames';import{AlertCircle}from'react-feather';import PerfectScrollbar from'react-perfect-scrollbar';// ** Custom Hooks\nimport{useOnClickOutside}from'@hooks/useOnClickOutside';// ** Styles\nimport'@styles/base/bootstrap-extended/_include.scss';import'./autocomplete.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Autocomplete=function Autocomplete(props){// ** Refs\nvar container=useRef(null);var inputElRef=useRef(null);var suggestionsListRef=useRef(null);// ** States\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),focused=_useState2[0],setFocused=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),activeSuggestion=_useState4[0],setActiveSuggestion=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showSuggestions=_useState6[0],setShowSuggestions=_useState6[1];var _useState7=useState(props.value?props.value:''),_useState8=_slicedToArray(_useState7,2),userInput=_useState8[0],setUserInput=_useState8[1];// ** Vars\nvar history=useHistory();var filteredData=[];// ** Suggestion Item Click Event\nvar onSuggestionItemClick=function onSuggestionItemClick(url,e){setActiveSuggestion(0);setShowSuggestions(false);setUserInput(filteredData[activeSuggestion][props.filterKey]);if(url!==undefined&&url!==null){history.push(url);}if(props.onSuggestionClick){props.onSuggestionClick(url,e);}};// ** Suggestion Hover Event\nvar onSuggestionItemHover=function onSuggestionItemHover(index){setActiveSuggestion(index);};// ** Input On Change Event\nvar _onChange=function onChange(e){var userInput=e.currentTarget.value;setActiveSuggestion(0);setShowSuggestions(true);setUserInput(userInput);if(e.target.value<1){setShowSuggestions(false);}};// ** Input Click Event\nvar onInputClick=function onInputClick(e){e.stopPropagation();};// ** Input's Keydown Event\nvar _onKeyDown=function onKeyDown(e){var filterKey=props.filterKey;var suggestionList=ReactDOM.findDOMNode(suggestionsListRef.current);// ** User pressed the up arrow\nif(e.keyCode===38&&activeSuggestion!==0){setActiveSuggestion(activeSuggestion-1);if(e.target.value.length>-1&&suggestionList!==null&&activeSuggestion<=filteredData.length/2){suggestionList.scrollTop=0;}}else if(e.keyCode===40&&activeSuggestion<filteredData.length-1){// ** User pressed the down arrow\nsetActiveSuggestion(activeSuggestion+1);if(e.target.value.length>-1&&suggestionList!==null&&activeSuggestion>=filteredData.length/2){suggestionList.scrollTop=suggestionList.scrollHeight;}}else if(e.keyCode===27){// ** User Pressed ESC\nsetShowSuggestions(false);setUserInput('');}else if(e.keyCode===13&&showSuggestions){// ** User Pressed ENTER\nonSuggestionItemClick(filteredData[activeSuggestion].link,e);setUserInput(filteredData[activeSuggestion][filterKey]);setShowSuggestions(false);}else{return;}// ** Custom Keydown Event\nif(props.onKeyDown!==undefined&&props.onKeyDown!==null){props.onKeyDown(e,userInput);}};// ** Function To Render Grouped Suggestions\nvar renderGroupedSuggestion=function renderGroupedSuggestion(arr){var filterKey=props.filterKey,customRender=props.customRender;var renderSuggestion=function renderSuggestion(item,i){if(!customRender){var suggestionURL=item.link!==undefined&&item.link!==null?item.link:null;return/*#__PURE__*/_jsx(\"li\",{className:classnames('suggestion-item',{active:filteredData.indexOf(item)===activeSuggestion}),onClick:function onClick(e){return onSuggestionItemClick(suggestionURL,e);},onMouseEnter:function onMouseEnter(){onSuggestionItemHover(filteredData.indexOf(item));},children:item[filterKey]},item[filterKey]);}else if(customRender){return customRender(item,i,filteredData,activeSuggestion,onSuggestionItemClick,onSuggestionItemHover,userInput);}else{return null;}};return arr.map(function(item,i){return renderSuggestion(item,i);});};// ** Function To Render Ungrouped Suggestions\nvar renderUngroupedSuggestions=function renderUngroupedSuggestions(){var _filteredData;var filterKey=props.filterKey,suggestions=props.suggestions,customRender=props.customRender,suggestionLimit=props.suggestionLimit;filteredData=[];var sortSingleData=suggestions.filter(function(i){var startCondition=i[filterKey].toLowerCase().startsWith(userInput.toLowerCase()),includeCondition=i[filterKey].toLowerCase().includes(userInput.toLowerCase());if(startCondition){return startCondition;}else if(!startCondition&&includeCondition){return includeCondition;}else{return null;}}).slice(0,suggestionLimit);(_filteredData=filteredData).push.apply(_filteredData,_toConsumableArray(sortSingleData));if(sortSingleData.length){return sortSingleData.map(function(suggestion,index){var suggestionURL=suggestion.link!==undefined&&suggestion.link!==null?suggestion.link:null;if(!customRender){return/*#__PURE__*/_jsx(\"li\",{className:classnames('suggestion-item',{active:filteredData.indexOf(suggestion)===activeSuggestion}),onClick:function onClick(e){return onSuggestionItemClick(suggestionURL,e);},onMouseEnter:function onMouseEnter(){return onSuggestionItemHover(filteredData.indexOf(suggestion));},children:suggestion[filterKey]},suggestion[filterKey]);}else if(customRender){return customRender(suggestion,index,filteredData,activeSuggestion,onSuggestionItemClick,onSuggestionItemHover,userInput);}else{return null;}});}else{return/*#__PURE__*/_jsxs(\"li\",{className:\"suggestion-item no-result\",children:[/*#__PURE__*/_jsx(AlertCircle,{size:15}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"align-middle ml-50\",children:\"No Result\"})]});}};// ** Function To Render Suggestions\nvar renderSuggestions=function renderSuggestions(){var filterKey=props.filterKey,grouped=props.grouped,filterHeaderKey=props.filterHeaderKey,suggestions=props.suggestions;// ** Checks if suggestions are grouped or not.\nif(grouped===undefined||grouped===null||!grouped){return renderUngroupedSuggestions();}else{filteredData=[];return suggestions.map(function(suggestion){var _filteredData2;var sortData=suggestion.data.filter(function(i){var startCondition=i[filterKey].toLowerCase().startsWith(userInput.toLowerCase()),includeCondition=i[filterKey].toLowerCase().includes(userInput.toLowerCase());if(startCondition){return startCondition;}else if(!startCondition&&includeCondition){return includeCondition;}else{return null;}}).slice(0,suggestion.searchLimit);(_filteredData2=filteredData).push.apply(_filteredData2,_toConsumableArray(sortData));return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"li\",{className:\"suggestion-item suggestion-title-wrapper\",children:/*#__PURE__*/_jsx(\"h6\",{className:\"suggestion-title\",children:suggestion[filterHeaderKey]})}),sortData.length?renderGroupedSuggestion(sortData):/*#__PURE__*/_jsxs(\"li\",{className:\"suggestion-item no-result\",children:[/*#__PURE__*/_jsx(AlertCircle,{size:15}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"align-middle ml-50\",children:\"No Result\"})]})]},suggestion[filterHeaderKey]);});}};//** ComponentDidMount\nuseEffect(function(){if(props.defaultSuggestions&&focused){setShowSuggestions(true);}},[focused,props.defaultSuggestions]);//** ComponentDidUpdate\nuseEffect(function(){var textInput=ReactDOM.findDOMNode(inputElRef.current);// ** For searchbar focus\nif(textInput!==null&&props.autoFocus){inputElRef.current.focus();}// ** If user has passed default suggestions & focus then show default suggestions\nif(props.defaultSuggestions&&focused){setShowSuggestions(true);}// ** Function to run on user passed Clear Input\nif(props.clearInput){props.clearInput(userInput,setUserInput);}// ** Function on Suggestions Shown\nif(props.onSuggestionsShown&&showSuggestions){props.onSuggestionsShown(userInput);}},[setShowSuggestions,focused,userInput,showSuggestions,props]);// ** On External Click Close The Search & Call Passed Function\nuseOnClickOutside(container,function(){setShowSuggestions(false);if(props.externalClick){props.externalClick();}});var suggestionsListComponent;if(showSuggestions){suggestionsListComponent=/*#__PURE__*/_jsx(PerfectScrollbar,{className:classnames('suggestions-list',_defineProperty({},props.wrapperClass,props.wrapperClass)),ref:suggestionsListRef,component:\"ul\",options:{wheelPropagation:false},children:renderSuggestions()});}return/*#__PURE__*/_jsxs(\"div\",{className:\"autocomplete-container\",ref:container,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){_onChange(e);if(props.onChange){props.onChange(e);}},onKeyDown:function onKeyDown(e){return _onKeyDown(e);},value:userInput,className:\"autocomplete-search \".concat(props.className?props.className:''),placeholder:props.placeholder,onClick:onInputClick,ref:inputElRef,onFocus:function onFocus(e){return setFocused(true);},autoFocus:props.autoFocus,onBlur:function onBlur(e){if(props.onBlur)props.onBlur(e);setFocused(false);}}),suggestionsListComponent]});};export default Autocomplete;// ** PropTypes","map":{"version":3,"sources":["D:/nodejs/IMA/src/@core/components/autocomplete/index.js"],"names":["Fragment","useEffect","useState","useRef","ReactDOM","useHistory","classnames","AlertCircle","PerfectScrollbar","useOnClickOutside","Autocomplete","props","container","inputElRef","suggestionsListRef","focused","setFocused","activeSuggestion","setActiveSuggestion","showSuggestions","setShowSuggestions","value","userInput","setUserInput","history","filteredData","onSuggestionItemClick","url","e","filterKey","undefined","push","onSuggestionClick","onSuggestionItemHover","index","onChange","currentTarget","target","onInputClick","stopPropagation","onKeyDown","suggestionList","findDOMNode","current","keyCode","length","scrollTop","scrollHeight","link","renderGroupedSuggestion","arr","customRender","renderSuggestion","item","i","suggestionURL","active","indexOf","map","renderUngroupedSuggestions","suggestions","suggestionLimit","sortSingleData","filter","startCondition","toLowerCase","startsWith","includeCondition","includes","slice","suggestion","renderSuggestions","grouped","filterHeaderKey","sortData","data","searchLimit","defaultSuggestions","textInput","autoFocus","focus","clearInput","onSuggestionsShown","externalClick","suggestionsListComponent","wrapperClass","wheelPropagation","className","placeholder","onBlur"],"mappings":"sZAAA;AACA,OAASA,QAAT,CAAmBC,SAAnB,CAA8BC,QAA9B,CAAwCC,MAAxC,KAAsD,OAAtD,CACA,MAAOC,CAAAA,QAAP,KAAqB,WAArB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CAEA;AAEA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CACA,OAASC,WAAT,KAA4B,eAA5B,CACA,MAAOC,CAAAA,gBAAP,KAA6B,yBAA7B,CAEA;AACA,OAASC,iBAAT,KAAkC,0BAAlC,CAEA;AACA,MAAO,+CAAP,CACA,MAAO,qBAAP,C,wFAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAC,KAAK,CAAI,CAC5B;AACA,GAAMC,CAAAA,SAAS,CAAGT,MAAM,CAAC,IAAD,CAAxB,CACA,GAAMU,CAAAA,UAAU,CAAGV,MAAM,CAAC,IAAD,CAAzB,CACA,GAAMW,CAAAA,kBAAkB,CAAGX,MAAM,CAAC,IAAD,CAAjC,CAEA;AACA,cAA8BD,QAAQ,CAAC,KAAD,CAAtC,wCAAOa,OAAP,eAAgBC,UAAhB,eACA,eAAgDd,QAAQ,CAAC,CAAD,CAAxD,yCAAOe,gBAAP,eAAyBC,mBAAzB,eACA,eAA8ChB,QAAQ,CAAC,KAAD,CAAtD,yCAAOiB,eAAP,eAAwBC,kBAAxB,eACA,eAAkClB,QAAQ,CAACS,KAAK,CAACU,KAAN,CAAcV,KAAK,CAACU,KAApB,CAA4B,EAA7B,CAA1C,yCAAOC,SAAP,eAAkBC,YAAlB,eAEA;AACA,GAAMC,CAAAA,OAAO,CAAGnB,UAAU,EAA1B,CACA,GAAIoB,CAAAA,YAAY,CAAG,EAAnB,CAEA;AACA,GAAMC,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAACC,GAAD,CAAMC,CAAN,CAAY,CACxCV,mBAAmB,CAAC,CAAD,CAAnB,CACAE,kBAAkB,CAAC,KAAD,CAAlB,CACAG,YAAY,CAACE,YAAY,CAACR,gBAAD,CAAZ,CAA+BN,KAAK,CAACkB,SAArC,CAAD,CAAZ,CACA,GAAIF,GAAG,GAAKG,SAAR,EAAqBH,GAAG,GAAK,IAAjC,CAAuC,CACrCH,OAAO,CAACO,IAAR,CAAaJ,GAAb,EACD,CAED,GAAIhB,KAAK,CAACqB,iBAAV,CAA6B,CAC3BrB,KAAK,CAACqB,iBAAN,CAAwBL,GAAxB,CAA6BC,CAA7B,EACD,CACF,CAXD,CAaA;AACA,GAAMK,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAAAC,KAAK,CAAI,CACrChB,mBAAmB,CAACgB,KAAD,CAAnB,CACD,CAFD,CAIA;AACA,GAAMC,CAAAA,SAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAAP,CAAC,CAAI,CACpB,GAAMN,CAAAA,SAAS,CAAGM,CAAC,CAACQ,aAAF,CAAgBf,KAAlC,CACAH,mBAAmB,CAAC,CAAD,CAAnB,CACAE,kBAAkB,CAAC,IAAD,CAAlB,CACAG,YAAY,CAACD,SAAD,CAAZ,CACA,GAAIM,CAAC,CAACS,MAAF,CAAShB,KAAT,CAAiB,CAArB,CAAwB,CACtBD,kBAAkB,CAAC,KAAD,CAAlB,CACD,CACF,CARD,CAUA;AACA,GAAMkB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAV,CAAC,CAAI,CACxBA,CAAC,CAACW,eAAF,GACD,CAFD,CAIA;AACA,GAAMC,CAAAA,UAAS,CAAG,QAAZA,CAAAA,SAAY,CAAAZ,CAAC,CAAI,CACrB,GAAMC,CAAAA,SAAS,CAAGlB,KAAK,CAACkB,SAAxB,CACA,GAAMY,CAAAA,cAAc,CAAGrC,QAAQ,CAACsC,WAAT,CAAqB5B,kBAAkB,CAAC6B,OAAxC,CAAvB,CAEA;AACA,GAAIf,CAAC,CAACgB,OAAF,GAAc,EAAd,EAAoB3B,gBAAgB,GAAK,CAA7C,CAAgD,CAC9CC,mBAAmB,CAACD,gBAAgB,CAAG,CAApB,CAAnB,CAEA,GAAIW,CAAC,CAACS,MAAF,CAAShB,KAAT,CAAewB,MAAf,CAAwB,CAAC,CAAzB,EAA8BJ,cAAc,GAAK,IAAjD,EAAyDxB,gBAAgB,EAAIQ,YAAY,CAACoB,MAAb,CAAsB,CAAvG,CAA0G,CACxGJ,cAAc,CAACK,SAAf,CAA2B,CAA3B,CACD,CACF,CAND,IAMO,IAAIlB,CAAC,CAACgB,OAAF,GAAc,EAAd,EAAoB3B,gBAAgB,CAAGQ,YAAY,CAACoB,MAAb,CAAsB,CAAjE,CAAoE,CACzE;AACA3B,mBAAmB,CAACD,gBAAgB,CAAG,CAApB,CAAnB,CAEA,GAAIW,CAAC,CAACS,MAAF,CAAShB,KAAT,CAAewB,MAAf,CAAwB,CAAC,CAAzB,EAA8BJ,cAAc,GAAK,IAAjD,EAAyDxB,gBAAgB,EAAIQ,YAAY,CAACoB,MAAb,CAAsB,CAAvG,CAA0G,CACxGJ,cAAc,CAACK,SAAf,CAA2BL,cAAc,CAACM,YAA1C,CACD,CACF,CAPM,IAOA,IAAInB,CAAC,CAACgB,OAAF,GAAc,EAAlB,CAAsB,CAC3B;AACAxB,kBAAkB,CAAC,KAAD,CAAlB,CACAG,YAAY,CAAC,EAAD,CAAZ,CACD,CAJM,IAIA,IAAIK,CAAC,CAACgB,OAAF,GAAc,EAAd,EAAoBzB,eAAxB,CAAyC,CAC9C;AACAO,qBAAqB,CAACD,YAAY,CAACR,gBAAD,CAAZ,CAA+B+B,IAAhC,CAAsCpB,CAAtC,CAArB,CACAL,YAAY,CAACE,YAAY,CAACR,gBAAD,CAAZ,CAA+BY,SAA/B,CAAD,CAAZ,CACAT,kBAAkB,CAAC,KAAD,CAAlB,CACD,CALM,IAKA,CACL,OACD,CAED;AACA,GAAIT,KAAK,CAAC6B,SAAN,GAAoBV,SAApB,EAAiCnB,KAAK,CAAC6B,SAAN,GAAoB,IAAzD,CAA+D,CAC7D7B,KAAK,CAAC6B,SAAN,CAAgBZ,CAAhB,CAAmBN,SAAnB,EACD,CACF,CAnCD,CAqCA;AACA,GAAM2B,CAAAA,uBAAuB,CAAG,QAA1BA,CAAAA,uBAA0B,CAAAC,GAAG,CAAI,CACrC,GAAQrB,CAAAA,SAAR,CAAoClB,KAApC,CAAQkB,SAAR,CAAmBsB,YAAnB,CAAoCxC,KAApC,CAAmBwC,YAAnB,CAEA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,IAAD,CAAOC,CAAP,CAAa,CACpC,GAAI,CAACH,YAAL,CAAmB,CACjB,GAAMI,CAAAA,aAAa,CAAGF,IAAI,CAACL,IAAL,GAAclB,SAAd,EAA2BuB,IAAI,CAACL,IAAL,GAAc,IAAzC,CAAgDK,IAAI,CAACL,IAArD,CAA4D,IAAlF,CACA,mBACE,WACE,SAAS,CAAE1C,UAAU,CAAC,iBAAD,CAAoB,CACvCkD,MAAM,CAAE/B,YAAY,CAACgC,OAAb,CAAqBJ,IAArB,IAA+BpC,gBADA,CAApB,CADvB,CAKE,OAAO,CAAE,iBAAAW,CAAC,QAAIF,CAAAA,qBAAqB,CAAC6B,aAAD,CAAgB3B,CAAhB,CAAzB,EALZ,CAME,YAAY,CAAE,uBAAM,CAClBK,qBAAqB,CAACR,YAAY,CAACgC,OAAb,CAAqBJ,IAArB,CAAD,CAArB,CACD,CARH,UAUGA,IAAI,CAACxB,SAAD,CAVP,EAIOwB,IAAI,CAACxB,SAAD,CAJX,CADF,CAcD,CAhBD,IAgBO,IAAIsB,YAAJ,CAAkB,CACvB,MAAOA,CAAAA,YAAY,CACjBE,IADiB,CAEjBC,CAFiB,CAGjB7B,YAHiB,CAIjBR,gBAJiB,CAKjBS,qBALiB,CAMjBO,qBANiB,CAOjBX,SAPiB,CAAnB,CASD,CAVM,IAUA,CACL,MAAO,KAAP,CACD,CACF,CA9BD,CAgCA,MAAO4B,CAAAA,GAAG,CAACQ,GAAJ,CAAQ,SAACL,IAAD,CAAOC,CAAP,CAAa,CAC1B,MAAOF,CAAAA,gBAAgB,CAACC,IAAD,CAAOC,CAAP,CAAvB,CACD,CAFM,CAAP,CAGD,CAtCD,CAwCA;AACA,GAAMK,CAAAA,0BAA0B,CAAG,QAA7BA,CAAAA,0BAA6B,EAAM,mBACvC,GAAQ9B,CAAAA,SAAR,CAAkElB,KAAlE,CAAQkB,SAAR,CAAmB+B,WAAnB,CAAkEjD,KAAlE,CAAmBiD,WAAnB,CAAgCT,YAAhC,CAAkExC,KAAlE,CAAgCwC,YAAhC,CAA8CU,eAA9C,CAAkElD,KAAlE,CAA8CkD,eAA9C,CAEApC,YAAY,CAAG,EAAf,CACA,GAAMqC,CAAAA,cAAc,CAAGF,WAAW,CAC/BG,MADoB,CACb,SAAAT,CAAC,CAAI,CACX,GAAMU,CAAAA,cAAc,CAAGV,CAAC,CAACzB,SAAD,CAAD,CAAaoC,WAAb,GAA2BC,UAA3B,CAAsC5C,SAAS,CAAC2C,WAAV,EAAtC,CAAvB,CACEE,gBAAgB,CAAGb,CAAC,CAACzB,SAAD,CAAD,CAAaoC,WAAb,GAA2BG,QAA3B,CAAoC9C,SAAS,CAAC2C,WAAV,EAApC,CADrB,CAEA,GAAID,cAAJ,CAAoB,CAClB,MAAOA,CAAAA,cAAP,CACD,CAFD,IAEO,IAAI,CAACA,cAAD,EAAmBG,gBAAvB,CAAyC,CAC9C,MAAOA,CAAAA,gBAAP,CACD,CAFM,IAEA,CACL,MAAO,KAAP,CACD,CACF,CAXoB,EAYpBE,KAZoB,CAYd,CAZc,CAYXR,eAZW,CAAvB,CAaA,eAAApC,YAAY,EAACM,IAAb,wCAAqB+B,cAArB,GACA,GAAIA,cAAc,CAACjB,MAAnB,CAA2B,CACzB,MAAOiB,CAAAA,cAAc,CAACJ,GAAf,CAAmB,SAACY,UAAD,CAAapC,KAAb,CAAuB,CAC/C,GAAMqB,CAAAA,aAAa,CAAGe,UAAU,CAACtB,IAAX,GAAoBlB,SAApB,EAAiCwC,UAAU,CAACtB,IAAX,GAAoB,IAArD,CAA4DsB,UAAU,CAACtB,IAAvE,CAA8E,IAApG,CACA,GAAI,CAACG,YAAL,CAAmB,CACjB,mBACE,WACE,SAAS,CAAE7C,UAAU,CAAC,iBAAD,CAAoB,CACvCkD,MAAM,CAAE/B,YAAY,CAACgC,OAAb,CAAqBa,UAArB,IAAqCrD,gBADN,CAApB,CADvB,CAKE,OAAO,CAAE,iBAAAW,CAAC,QAAIF,CAAAA,qBAAqB,CAAC6B,aAAD,CAAgB3B,CAAhB,CAAzB,EALZ,CAME,YAAY,CAAE,8BAAMK,CAAAA,qBAAqB,CAACR,YAAY,CAACgC,OAAb,CAAqBa,UAArB,CAAD,CAA3B,EANhB,UAQGA,UAAU,CAACzC,SAAD,CARb,EAIOyC,UAAU,CAACzC,SAAD,CAJjB,CADF,CAYD,CAbD,IAaO,IAAIsB,YAAJ,CAAkB,CACvB,MAAOA,CAAAA,YAAY,CACjBmB,UADiB,CAEjBpC,KAFiB,CAGjBT,YAHiB,CAIjBR,gBAJiB,CAKjBS,qBALiB,CAMjBO,qBANiB,CAOjBX,SAPiB,CAAnB,CASD,CAVM,IAUA,CACL,MAAO,KAAP,CACD,CACF,CA5BM,CAAP,CA6BD,CA9BD,IA8BO,CACL,mBACE,YAAI,SAAS,CAAC,2BAAd,wBACE,KAAC,WAAD,EAAa,IAAI,CAAE,EAAnB,EADF,kBAC4B,aAAM,SAAS,CAAC,oBAAhB,uBAD5B,GADF,CAKD,CACF,CAvDD,CAyDA;AACA,GAAMiD,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAM,CAC9B,GAAQ1C,CAAAA,SAAR,CAA6DlB,KAA7D,CAAQkB,SAAR,CAAmB2C,OAAnB,CAA6D7D,KAA7D,CAAmB6D,OAAnB,CAA4BC,eAA5B,CAA6D9D,KAA7D,CAA4B8D,eAA5B,CAA6Cb,WAA7C,CAA6DjD,KAA7D,CAA6CiD,WAA7C,CAEA;AACA,GAAIY,OAAO,GAAK1C,SAAZ,EAAyB0C,OAAO,GAAK,IAArC,EAA6C,CAACA,OAAlD,CAA2D,CACzD,MAAOb,CAAAA,0BAA0B,EAAjC,CACD,CAFD,IAEO,CACLlC,YAAY,CAAG,EAAf,CACA,MAAOmC,CAAAA,WAAW,CAACF,GAAZ,CAAgB,SAAAY,UAAU,CAAI,oBACnC,GAAMI,CAAAA,QAAQ,CAAGJ,UAAU,CAACK,IAAX,CACdZ,MADc,CACP,SAAAT,CAAC,CAAI,CACX,GAAMU,CAAAA,cAAc,CAAGV,CAAC,CAACzB,SAAD,CAAD,CAAaoC,WAAb,GAA2BC,UAA3B,CAAsC5C,SAAS,CAAC2C,WAAV,EAAtC,CAAvB,CACEE,gBAAgB,CAAGb,CAAC,CAACzB,SAAD,CAAD,CAAaoC,WAAb,GAA2BG,QAA3B,CAAoC9C,SAAS,CAAC2C,WAAV,EAApC,CADrB,CAEA,GAAID,cAAJ,CAAoB,CAClB,MAAOA,CAAAA,cAAP,CACD,CAFD,IAEO,IAAI,CAACA,cAAD,EAAmBG,gBAAvB,CAAyC,CAC9C,MAAOA,CAAAA,gBAAP,CACD,CAFM,IAEA,CACL,MAAO,KAAP,CACD,CACF,CAXc,EAYdE,KAZc,CAYR,CAZQ,CAYLC,UAAU,CAACM,WAZN,CAAjB,CAcA,gBAAAnD,YAAY,EAACM,IAAb,yCAAqB2C,QAArB,GACA,mBACE,MAAC,QAAD,yBACE,WAAI,SAAS,CAAC,0CAAd,uBACE,WAAI,SAAS,CAAC,kBAAd,UAAkCJ,UAAU,CAACG,eAAD,CAA5C,EADF,EADF,CAIGC,QAAQ,CAAC7B,MAAT,CACCI,uBAAuB,CAACyB,QAAD,CADxB,cAGC,YAAI,SAAS,CAAC,2BAAd,wBACE,KAAC,WAAD,EAAa,IAAI,CAAE,EAAnB,EADF,kBAC4B,aAAM,SAAS,CAAC,oBAAhB,uBAD5B,GAPJ,GAAeJ,UAAU,CAACG,eAAD,CAAzB,CADF,CAcD,CA9BM,CAAP,CA+BD,CACF,CAxCD,CA0CA;AACAxE,SAAS,CAAC,UAAM,CACd,GAAIU,KAAK,CAACkE,kBAAN,EAA4B9D,OAAhC,CAAyC,CACvCK,kBAAkB,CAAC,IAAD,CAAlB,CACD,CACF,CAJQ,CAIN,CAACL,OAAD,CAAUJ,KAAK,CAACkE,kBAAhB,CAJM,CAAT,CAMA;AACA5E,SAAS,CAAC,UAAM,CACd,GAAM6E,CAAAA,SAAS,CAAG1E,QAAQ,CAACsC,WAAT,CAAqB7B,UAAU,CAAC8B,OAAhC,CAAlB,CAEA;AACA,GAAImC,SAAS,GAAK,IAAd,EAAsBnE,KAAK,CAACoE,SAAhC,CAA2C,CACzClE,UAAU,CAAC8B,OAAX,CAAmBqC,KAAnB,GACD,CAED;AACA,GAAIrE,KAAK,CAACkE,kBAAN,EAA4B9D,OAAhC,CAAyC,CACvCK,kBAAkB,CAAC,IAAD,CAAlB,CACD,CAED;AACA,GAAIT,KAAK,CAACsE,UAAV,CAAsB,CACpBtE,KAAK,CAACsE,UAAN,CAAiB3D,SAAjB,CAA4BC,YAA5B,EACD,CAED;AACA,GAAIZ,KAAK,CAACuE,kBAAN,EAA4B/D,eAAhC,CAAiD,CAC/CR,KAAK,CAACuE,kBAAN,CAAyB5D,SAAzB,EACD,CACF,CAtBQ,CAsBN,CAACF,kBAAD,CAAqBL,OAArB,CAA8BO,SAA9B,CAAyCH,eAAzC,CAA0DR,KAA1D,CAtBM,CAAT,CAwBA;AACAF,iBAAiB,CAACG,SAAD,CAAY,UAAM,CACjCQ,kBAAkB,CAAC,KAAD,CAAlB,CACA,GAAIT,KAAK,CAACwE,aAAV,CAAyB,CACvBxE,KAAK,CAACwE,aAAN,GACD,CACF,CALgB,CAAjB,CAOA,GAAIC,CAAAA,wBAAJ,CAEA,GAAIjE,eAAJ,CAAqB,CACnBiE,wBAAwB,cACtB,KAAC,gBAAD,EACE,SAAS,CAAE9E,UAAU,CAAC,kBAAD,oBAClBK,KAAK,CAAC0E,YADY,CACG1E,KAAK,CAAC0E,YADT,EADvB,CAIE,GAAG,CAAEvE,kBAJP,CAKE,SAAS,CAAC,IALZ,CAME,OAAO,CAAE,CAAEwE,gBAAgB,CAAE,KAApB,CANX,UAQGf,iBAAiB,EARpB,EADF,CAYD,CAED,mBACE,aAAK,SAAS,CAAC,wBAAf,CAAwC,GAAG,CAAE3D,SAA7C,wBACE,cACE,IAAI,CAAC,MADP,CAEE,QAAQ,CAAE,kBAAAgB,CAAC,CAAI,CACbO,SAAQ,CAACP,CAAD,CAAR,CACA,GAAIjB,KAAK,CAACwB,QAAV,CAAoB,CAClBxB,KAAK,CAACwB,QAAN,CAAeP,CAAf,EACD,CACF,CAPH,CAQE,SAAS,CAAE,mBAAAA,CAAC,QAAIY,CAAAA,UAAS,CAACZ,CAAD,CAAb,EARd,CASE,KAAK,CAAEN,SATT,CAUE,SAAS,+BAAyBX,KAAK,CAAC4E,SAAN,CAAkB5E,KAAK,CAAC4E,SAAxB,CAAoC,EAA7D,CAVX,CAWE,WAAW,CAAE5E,KAAK,CAAC6E,WAXrB,CAYE,OAAO,CAAElD,YAZX,CAaE,GAAG,CAAEzB,UAbP,CAcE,OAAO,CAAE,iBAAAe,CAAC,QAAIZ,CAAAA,UAAU,CAAC,IAAD,CAAd,EAdZ,CAeE,SAAS,CAAEL,KAAK,CAACoE,SAfnB,CAgBE,MAAM,CAAE,gBAAAnD,CAAC,CAAI,CACX,GAAIjB,KAAK,CAAC8E,MAAV,CAAkB9E,KAAK,CAAC8E,MAAN,CAAa7D,CAAb,EAClBZ,UAAU,CAAC,KAAD,CAAV,CACD,CAnBH,EADF,CAsBGoE,wBAtBH,GADF,CA0BD,CA1TD,CA4TA,cAAe1E,CAAAA,YAAf,CAEA","sourcesContent":["// ** React Imports\r\nimport { Fragment, useEffect, useState, useRef } from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\n// ** Third Party Components\r\nimport PropTypes from 'prop-types'\r\nimport classnames from 'classnames'\r\nimport { AlertCircle } from 'react-feather'\r\nimport PerfectScrollbar from 'react-perfect-scrollbar'\r\n\r\n// ** Custom Hooks\r\nimport { useOnClickOutside } from '@hooks/useOnClickOutside'\r\n\r\n// ** Styles\r\nimport '@styles/base/bootstrap-extended/_include.scss'\r\nimport './autocomplete.scss'\r\n\r\nconst Autocomplete = props => {\r\n  // ** Refs\r\n  const container = useRef(null)\r\n  const inputElRef = useRef(null)\r\n  const suggestionsListRef = useRef(null)\r\n\r\n  // ** States\r\n  const [focused, setFocused] = useState(false)\r\n  const [activeSuggestion, setActiveSuggestion] = useState(0)\r\n  const [showSuggestions, setShowSuggestions] = useState(false)\r\n  const [userInput, setUserInput] = useState(props.value ? props.value : '')\r\n\r\n  // ** Vars\r\n  const history = useHistory()\r\n  let filteredData = []\r\n\r\n  // ** Suggestion Item Click Event\r\n  const onSuggestionItemClick = (url, e) => {\r\n    setActiveSuggestion(0)\r\n    setShowSuggestions(false)\r\n    setUserInput(filteredData[activeSuggestion][props.filterKey])\r\n    if (url !== undefined && url !== null) {\r\n      history.push(url)\r\n    }\r\n\r\n    if (props.onSuggestionClick) {\r\n      props.onSuggestionClick(url, e)\r\n    }\r\n  }\r\n\r\n  // ** Suggestion Hover Event\r\n  const onSuggestionItemHover = index => {\r\n    setActiveSuggestion(index)\r\n  }\r\n\r\n  // ** Input On Change Event\r\n  const onChange = e => {\r\n    const userInput = e.currentTarget.value\r\n    setActiveSuggestion(0)\r\n    setShowSuggestions(true)\r\n    setUserInput(userInput)\r\n    if (e.target.value < 1) {\r\n      setShowSuggestions(false)\r\n    }\r\n  }\r\n\r\n  // ** Input Click Event\r\n  const onInputClick = e => {\r\n    e.stopPropagation()\r\n  }\r\n\r\n  // ** Input's Keydown Event\r\n  const onKeyDown = e => {\r\n    const filterKey = props.filterKey\r\n    const suggestionList = ReactDOM.findDOMNode(suggestionsListRef.current)\r\n\r\n    // ** User pressed the up arrow\r\n    if (e.keyCode === 38 && activeSuggestion !== 0) {\r\n      setActiveSuggestion(activeSuggestion - 1)\r\n\r\n      if (e.target.value.length > -1 && suggestionList !== null && activeSuggestion <= filteredData.length / 2) {\r\n        suggestionList.scrollTop = 0\r\n      }\r\n    } else if (e.keyCode === 40 && activeSuggestion < filteredData.length - 1) {\r\n      // ** User pressed the down arrow\r\n      setActiveSuggestion(activeSuggestion + 1)\r\n\r\n      if (e.target.value.length > -1 && suggestionList !== null && activeSuggestion >= filteredData.length / 2) {\r\n        suggestionList.scrollTop = suggestionList.scrollHeight\r\n      }\r\n    } else if (e.keyCode === 27) {\r\n      // ** User Pressed ESC\r\n      setShowSuggestions(false)\r\n      setUserInput('')\r\n    } else if (e.keyCode === 13 && showSuggestions) {\r\n      // ** User Pressed ENTER\r\n      onSuggestionItemClick(filteredData[activeSuggestion].link, e)\r\n      setUserInput(filteredData[activeSuggestion][filterKey])\r\n      setShowSuggestions(false)\r\n    } else {\r\n      return\r\n    }\r\n\r\n    // ** Custom Keydown Event\r\n    if (props.onKeyDown !== undefined && props.onKeyDown !== null) {\r\n      props.onKeyDown(e, userInput)\r\n    }\r\n  }\r\n\r\n  // ** Function To Render Grouped Suggestions\r\n  const renderGroupedSuggestion = arr => {\r\n    const { filterKey, customRender } = props\r\n\r\n    const renderSuggestion = (item, i) => {\r\n      if (!customRender) {\r\n        const suggestionURL = item.link !== undefined && item.link !== null ? item.link : null\r\n        return (\r\n          <li\r\n            className={classnames('suggestion-item', {\r\n              active: filteredData.indexOf(item) === activeSuggestion\r\n            })}\r\n            key={item[filterKey]}\r\n            onClick={e => onSuggestionItemClick(suggestionURL, e)}\r\n            onMouseEnter={() => {\r\n              onSuggestionItemHover(filteredData.indexOf(item))\r\n            }}\r\n          >\r\n            {item[filterKey]}\r\n          </li>\r\n        )\r\n      } else if (customRender) {\r\n        return customRender(\r\n          item,\r\n          i,\r\n          filteredData,\r\n          activeSuggestion,\r\n          onSuggestionItemClick,\r\n          onSuggestionItemHover,\r\n          userInput\r\n        )\r\n      } else {\r\n        return null\r\n      }\r\n    }\r\n\r\n    return arr.map((item, i) => {\r\n      return renderSuggestion(item, i)\r\n    })\r\n  }\r\n\r\n  // ** Function To Render Ungrouped Suggestions\r\n  const renderUngroupedSuggestions = () => {\r\n    const { filterKey, suggestions, customRender, suggestionLimit } = props\r\n\r\n    filteredData = []\r\n    const sortSingleData = suggestions\r\n      .filter(i => {\r\n        const startCondition = i[filterKey].toLowerCase().startsWith(userInput.toLowerCase()),\r\n          includeCondition = i[filterKey].toLowerCase().includes(userInput.toLowerCase())\r\n        if (startCondition) {\r\n          return startCondition\r\n        } else if (!startCondition && includeCondition) {\r\n          return includeCondition\r\n        } else {\r\n          return null\r\n        }\r\n      })\r\n      .slice(0, suggestionLimit)\r\n    filteredData.push(...sortSingleData)\r\n    if (sortSingleData.length) {\r\n      return sortSingleData.map((suggestion, index) => {\r\n        const suggestionURL = suggestion.link !== undefined && suggestion.link !== null ? suggestion.link : null\r\n        if (!customRender) {\r\n          return (\r\n            <li\r\n              className={classnames('suggestion-item', {\r\n                active: filteredData.indexOf(suggestion) === activeSuggestion\r\n              })}\r\n              key={suggestion[filterKey]}\r\n              onClick={e => onSuggestionItemClick(suggestionURL, e)}\r\n              onMouseEnter={() => onSuggestionItemHover(filteredData.indexOf(suggestion))}\r\n            >\r\n              {suggestion[filterKey]}\r\n            </li>\r\n          )\r\n        } else if (customRender) {\r\n          return customRender(\r\n            suggestion,\r\n            index,\r\n            filteredData,\r\n            activeSuggestion,\r\n            onSuggestionItemClick,\r\n            onSuggestionItemHover,\r\n            userInput\r\n          )\r\n        } else {\r\n          return null\r\n        }\r\n      })\r\n    } else {\r\n      return (\r\n        <li className='suggestion-item no-result'>\r\n          <AlertCircle size={15} /> <span className='align-middle ml-50'>No Result</span>\r\n        </li>\r\n      )\r\n    }\r\n  }\r\n\r\n  // ** Function To Render Suggestions\r\n  const renderSuggestions = () => {\r\n    const { filterKey, grouped, filterHeaderKey, suggestions } = props\r\n\r\n    // ** Checks if suggestions are grouped or not.\r\n    if (grouped === undefined || grouped === null || !grouped) {\r\n      return renderUngroupedSuggestions()\r\n    } else {\r\n      filteredData = []\r\n      return suggestions.map(suggestion => {\r\n        const sortData = suggestion.data\r\n          .filter(i => {\r\n            const startCondition = i[filterKey].toLowerCase().startsWith(userInput.toLowerCase()),\r\n              includeCondition = i[filterKey].toLowerCase().includes(userInput.toLowerCase())\r\n            if (startCondition) {\r\n              return startCondition\r\n            } else if (!startCondition && includeCondition) {\r\n              return includeCondition\r\n            } else {\r\n              return null\r\n            }\r\n          })\r\n          .slice(0, suggestion.searchLimit)\r\n\r\n        filteredData.push(...sortData)\r\n        return (\r\n          <Fragment key={suggestion[filterHeaderKey]}>\r\n            <li className='suggestion-item suggestion-title-wrapper'>\r\n              <h6 className='suggestion-title'>{suggestion[filterHeaderKey]}</h6>\r\n            </li>\r\n            {sortData.length ? (\r\n              renderGroupedSuggestion(sortData)\r\n            ) : (\r\n              <li className='suggestion-item no-result'>\r\n                <AlertCircle size={15} /> <span className='align-middle ml-50'>No Result</span>\r\n              </li>\r\n            )}\r\n          </Fragment>\r\n        )\r\n      })\r\n    }\r\n  }\r\n\r\n  //** ComponentDidMount\r\n  useEffect(() => {\r\n    if (props.defaultSuggestions && focused) {\r\n      setShowSuggestions(true)\r\n    }\r\n  }, [focused, props.defaultSuggestions])\r\n\r\n  //** ComponentDidUpdate\r\n  useEffect(() => {\r\n    const textInput = ReactDOM.findDOMNode(inputElRef.current)\r\n\r\n    // ** For searchbar focus\r\n    if (textInput !== null && props.autoFocus) {\r\n      inputElRef.current.focus()\r\n    }\r\n\r\n    // ** If user has passed default suggestions & focus then show default suggestions\r\n    if (props.defaultSuggestions && focused) {\r\n      setShowSuggestions(true)\r\n    }\r\n\r\n    // ** Function to run on user passed Clear Input\r\n    if (props.clearInput) {\r\n      props.clearInput(userInput, setUserInput)\r\n    }\r\n\r\n    // ** Function on Suggestions Shown\r\n    if (props.onSuggestionsShown && showSuggestions) {\r\n      props.onSuggestionsShown(userInput)\r\n    }\r\n  }, [setShowSuggestions, focused, userInput, showSuggestions, props])\r\n\r\n  // ** On External Click Close The Search & Call Passed Function\r\n  useOnClickOutside(container, () => {\r\n    setShowSuggestions(false)\r\n    if (props.externalClick) {\r\n      props.externalClick()\r\n    }\r\n  })\r\n\r\n  let suggestionsListComponent\r\n\r\n  if (showSuggestions) {\r\n    suggestionsListComponent = (\r\n      <PerfectScrollbar\r\n        className={classnames('suggestions-list', {\r\n          [props.wrapperClass]: props.wrapperClass\r\n        })}\r\n        ref={suggestionsListRef}\r\n        component='ul'\r\n        options={{ wheelPropagation: false }}\r\n      >\r\n        {renderSuggestions()}\r\n      </PerfectScrollbar>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className='autocomplete-container' ref={container}>\r\n      <input\r\n        type='text'\r\n        onChange={e => {\r\n          onChange(e)\r\n          if (props.onChange) {\r\n            props.onChange(e)\r\n          }\r\n        }}\r\n        onKeyDown={e => onKeyDown(e)}\r\n        value={userInput}\r\n        className={`autocomplete-search ${props.className ? props.className : ''}`}\r\n        placeholder={props.placeholder}\r\n        onClick={onInputClick}\r\n        ref={inputElRef}\r\n        onFocus={e => setFocused(true)}\r\n        autoFocus={props.autoFocus}\r\n        onBlur={e => {\r\n          if (props.onBlur) props.onBlur(e)\r\n          setFocused(false)\r\n        }}\r\n      />\r\n      {suggestionsListComponent}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Autocomplete\r\n\r\n// ** PropTypes\r\nAutocomplete.propTypes = {\r\n  suggestions: PropTypes.array.isRequired,\r\n  filterKey: PropTypes.string.isRequired,\r\n  defaultValue: PropTypes.string,\r\n  wrapperClass: PropTypes.string,\r\n  filterHeaderKey: PropTypes.string,\r\n  placeholder: PropTypes.string,\r\n  suggestionLimit: PropTypes.number,\r\n  grouped: PropTypes.bool,\r\n  autoFocus: PropTypes.bool,\r\n  onKeyDown: PropTypes.func,\r\n  onChange: PropTypes.func,\r\n  onSuggestionsShown: PropTypes.func,\r\n  onSuggestionItemClick: PropTypes.func,\r\n  clearInput: PropTypes.func,\r\n  externalClick: PropTypes.func\r\n}\r\n"]},"metadata":{},"sourceType":"module"}