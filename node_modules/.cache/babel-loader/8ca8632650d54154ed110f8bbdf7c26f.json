{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar react_1 = tslib_1.__importStar(require(\"react\"));\n\nvar SlideDownContent = function (_super) {\n  tslib_1.__extends(SlideDownContent, _super);\n\n  function SlideDownContent(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.outerRef = null;\n\n    _this.handleRef = function (ref) {\n      _this.outerRef = ref;\n\n      if (_this.props.forwardedRef) {\n        if (typeof _this.props.forwardedRef === 'function') {\n          _this.props.forwardedRef(ref);\n        } else if (typeof _this.props.forwardedRef === 'object') {\n          var forwardedRef = _this.props.forwardedRef;\n          forwardedRef.current = ref;\n        } else {\n          throw new Error(\"Invalid forwardedRef \" + _this.props.forwardedRef);\n        }\n      }\n    };\n\n    _this.handleTransitionEnd = function (evt) {\n      if (evt.target === _this.outerRef && evt.propertyName === 'height') {\n        if (_this.state.childrenLeaving) {\n          _this.setState({\n            children: null,\n            childrenLeaving: false\n          }, function () {\n            return _this.endTransition();\n          });\n        } else {\n          _this.endTransition();\n        }\n      }\n    };\n\n    _this.state = {\n      children: props.children,\n      childrenLeaving: false\n    };\n    return _this;\n  }\n\n  SlideDownContent.prototype.componentDidMount = function () {\n    if (this.outerRef) {\n      if (this.props.closed || !this.props.children) {\n        this.outerRef.classList.add('closed');\n        this.outerRef.style.height = '0px';\n      } else if (this.props.transitionOnAppear) {\n        this.startTransition('0px');\n      } else {\n        this.outerRef.style.height = 'auto';\n      }\n    }\n  };\n\n  SlideDownContent.prototype.getSnapshotBeforeUpdate = function () {\n    return this.outerRef ? this.outerRef.getBoundingClientRect().height + 'px' : null;\n  };\n\n  SlideDownContent.getDerivedStateFromProps = function (props, state) {\n    if (props.children) {\n      return {\n        children: props.children,\n        childrenLeaving: false\n      };\n    } else if (state.children) {\n      return {\n        children: state.children,\n        childrenLeaving: true\n      };\n    } else {\n      return null;\n    }\n  };\n\n  SlideDownContent.prototype.componentDidUpdate = function (_prevProps, _prevState, snapshot) {\n    if (this.outerRef) {\n      this.startTransition(snapshot);\n    }\n  };\n\n  SlideDownContent.prototype.startTransition = function (prevHeight) {\n    var endHeight = '0px';\n\n    if (!this.props.closed && !this.state.childrenLeaving && this.state.children) {\n      this.outerRef.classList.remove('closed');\n      this.outerRef.style.height = 'auto';\n      endHeight = getComputedStyle(this.outerRef).height;\n    }\n\n    if (parseFloat(endHeight).toFixed(2) !== parseFloat(prevHeight).toFixed(2)) {\n      this.outerRef.classList.add('transitioning');\n      this.outerRef.style.height = prevHeight;\n      this.outerRef.offsetHeight;\n      this.outerRef.style.transitionProperty = 'height';\n      this.outerRef.style.height = endHeight;\n    }\n  };\n\n  SlideDownContent.prototype.endTransition = function () {\n    this.outerRef.classList.remove('transitioning');\n    this.outerRef.style.transitionProperty = 'none';\n    this.outerRef.style.height = this.props.closed ? '0px' : 'auto';\n\n    if (this.props.closed || !this.state.children) {\n      this.outerRef.classList.add('closed');\n    }\n  };\n\n  SlideDownContent.prototype.render = function () {\n    var _a = this.props,\n        _b = _a.as,\n        as = _b === void 0 ? 'div' : _b,\n        children = _a.children,\n        className = _a.className,\n        closed = _a.closed,\n        transitionOnAppear = _a.transitionOnAppear,\n        forwardedRef = _a.forwardedRef,\n        rest = tslib_1.__rest(_a, [\"as\", \"children\", \"className\", \"closed\", \"transitionOnAppear\", \"forwardedRef\"]);\n\n    var containerClassName = className ? 'react-slidedown ' + className : 'react-slidedown';\n    return react_1.default.createElement(as, tslib_1.__assign({\n      ref: this.handleRef,\n      className: containerClassName,\n      onTransitionEnd: this.handleTransitionEnd\n    }, rest), this.state.children);\n  };\n\n  SlideDownContent.defaultProps = {\n    transitionOnAppear: true,\n    closed: false\n  };\n  return SlideDownContent;\n}(react_1.Component);\n\nexports.SlideDown = react_1.forwardRef(function (props, ref) {\n  return react_1.default.createElement(SlideDownContent, tslib_1.__assign({}, props, {\n    forwardedRef: ref\n  }));\n});\nexports.default = exports.SlideDown;","map":{"version":3,"sources":["slidedown.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar react_1 = tslib_1.__importStar(require(\"react\"));\r\nvar SlideDownContent = (function (_super) {\r\n    tslib_1.__extends(SlideDownContent, _super);\r\n    function SlideDownContent(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.outerRef = null;\r\n        _this.handleRef = function (ref) {\r\n            _this.outerRef = ref;\r\n            if (_this.props.forwardedRef) {\r\n                if (typeof _this.props.forwardedRef === 'function') {\r\n                    _this.props.forwardedRef(ref);\r\n                }\r\n                else if (typeof _this.props.forwardedRef === 'object') {\r\n                    var forwardedRef = _this.props.forwardedRef;\r\n                    forwardedRef.current = ref;\r\n                }\r\n                else {\r\n                    throw new Error(\"Invalid forwardedRef \" + _this.props.forwardedRef);\r\n                }\r\n            }\r\n        };\r\n        _this.handleTransitionEnd = function (evt) {\r\n            if ((evt.target === _this.outerRef) && (evt.propertyName === 'height')) {\r\n                if (_this.state.childrenLeaving) {\r\n                    _this.setState({ children: null, childrenLeaving: false }, function () { return _this.endTransition(); });\r\n                }\r\n                else {\r\n                    _this.endTransition();\r\n                }\r\n            }\r\n        };\r\n        _this.state = {\r\n            children: props.children,\r\n            childrenLeaving: false\r\n        };\r\n        return _this;\r\n    }\r\n    SlideDownContent.prototype.componentDidMount = function () {\r\n        if (this.outerRef) {\r\n            if (this.props.closed || !this.props.children) {\r\n                this.outerRef.classList.add('closed');\r\n                this.outerRef.style.height = '0px';\r\n            }\r\n            else if (this.props.transitionOnAppear) {\r\n                this.startTransition('0px');\r\n            }\r\n            else {\r\n                this.outerRef.style.height = 'auto';\r\n            }\r\n        }\r\n    };\r\n    SlideDownContent.prototype.getSnapshotBeforeUpdate = function () {\r\n        return this.outerRef ? this.outerRef.getBoundingClientRect().height + 'px' : null;\r\n    };\r\n    SlideDownContent.getDerivedStateFromProps = function (props, state) {\r\n        if (props.children) {\r\n            return {\r\n                children: props.children,\r\n                childrenLeaving: false\r\n            };\r\n        }\r\n        else if (state.children) {\r\n            return {\r\n                children: state.children,\r\n                childrenLeaving: true\r\n            };\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    SlideDownContent.prototype.componentDidUpdate = function (_prevProps, _prevState, snapshot) {\r\n        if (this.outerRef) {\r\n            this.startTransition(snapshot);\r\n        }\r\n    };\r\n    SlideDownContent.prototype.startTransition = function (prevHeight) {\r\n        var endHeight = '0px';\r\n        if (!this.props.closed && !this.state.childrenLeaving && this.state.children) {\r\n            this.outerRef.classList.remove('closed');\r\n            this.outerRef.style.height = 'auto';\r\n            endHeight = getComputedStyle(this.outerRef).height;\r\n        }\r\n        if (parseFloat(endHeight).toFixed(2) !== parseFloat(prevHeight).toFixed(2)) {\r\n            this.outerRef.classList.add('transitioning');\r\n            this.outerRef.style.height = prevHeight;\r\n            this.outerRef.offsetHeight;\r\n            this.outerRef.style.transitionProperty = 'height';\r\n            this.outerRef.style.height = endHeight;\r\n        }\r\n    };\r\n    SlideDownContent.prototype.endTransition = function () {\r\n        this.outerRef.classList.remove('transitioning');\r\n        this.outerRef.style.transitionProperty = 'none';\r\n        this.outerRef.style.height = this.props.closed ? '0px' : 'auto';\r\n        if (this.props.closed || !this.state.children) {\r\n            this.outerRef.classList.add('closed');\r\n        }\r\n    };\r\n    SlideDownContent.prototype.render = function () {\r\n        var _a = this.props, _b = _a.as, as = _b === void 0 ? 'div' : _b, children = _a.children, className = _a.className, closed = _a.closed, transitionOnAppear = _a.transitionOnAppear, forwardedRef = _a.forwardedRef, rest = tslib_1.__rest(_a, [\"as\", \"children\", \"className\", \"closed\", \"transitionOnAppear\", \"forwardedRef\"]);\r\n        var containerClassName = className ? 'react-slidedown ' + className : 'react-slidedown';\r\n        return react_1.default.createElement(as, tslib_1.__assign({ ref: this.handleRef, className: containerClassName, onTransitionEnd: this.handleTransitionEnd }, rest), this.state.children);\r\n    };\r\n    SlideDownContent.defaultProps = {\r\n        transitionOnAppear: true,\r\n        closed: false\r\n    };\r\n    return SlideDownContent;\r\n}(react_1.Component));\r\nexports.SlideDown = react_1.forwardRef(function (props, ref) { return (react_1.default.createElement(SlideDownContent, tslib_1.__assign({}, props, { forwardedRef: ref }))); });\r\nexports.default = exports.SlideDown;\r\n//# sourceMappingURL=slidedown.js.map"]},"metadata":{},"sourceType":"script"}