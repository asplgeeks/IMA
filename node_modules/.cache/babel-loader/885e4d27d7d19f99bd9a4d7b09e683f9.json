{"ast":null,"code":"import _slicedToArray from\"D:/nodejs/IMA/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// ** React Imports\nimport{useEffect,useState}from'react';// ** Third Party Components\nimport axios from'axios';import classnames from'classnames';import*as Icon from'react-feather';import{NavItem,NavLink}from'reactstrap';// ** Store & Actions\nimport{useDispatch}from'react-redux';import{handleSearchQuery}from'@store/actions/navbar';// ** Custom Components\nimport Autocomplete from'@components/autocomplete';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NavbarSearch=function NavbarSearch(){// ** Store Vars\nvar dispatch=useDispatch();// ** States\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),suggestions=_useState2[0],setSuggestions=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),navbarSearch=_useState4[0],setNavbarSearch=_useState4[1];// ** ComponentDidMount\nuseEffect(function(){axios.get('/api/main-search/data').then(function(_ref){var data=_ref.data;setSuggestions(data.searchArr);});},[]);// ** Removes query in store\nvar handleClearQueryInStore=function handleClearQueryInStore(){return dispatch(handleSearchQuery(''));};// ** Function to handle external Input click\nvar handleExternalClick=function handleExternalClick(){if(navbarSearch===true){setNavbarSearch(false);handleClearQueryInStore();}};// ** Function to clear input value\nvar handleClearInput=function handleClearInput(setUserInput){if(!navbarSearch){setUserInput('');handleClearQueryInStore();}};// ** Function to close search on ESC & ENTER Click\nvar onKeyDown=function onKeyDown(e){if(e.keyCode===27||e.keyCode===13){setTimeout(function(){setNavbarSearch(false);handleClearQueryInStore();},1);}};// ** Function to handle search suggestion Click\nvar handleSuggestionItemClick=function handleSuggestionItemClick(){setNavbarSearch(false);handleClearQueryInStore();};// ** Function to handle search list Click\nvar handleListItemClick=function handleListItemClick(func,link,e){func(link,e);setTimeout(function(){setNavbarSearch(false);},1);handleClearQueryInStore();};return/*#__PURE__*/_jsxs(NavItem,{className:\"nav-search\",onClick:function onClick(){return setNavbarSearch(true);},children:[/*#__PURE__*/_jsx(NavLink,{className:\"nav-link-search\",children:/*#__PURE__*/_jsx(Icon.Search,{className:\"ficon\"})}),/*#__PURE__*/_jsxs(\"div\",{className:classnames('search-input',{open:navbarSearch===true}),children:[/*#__PURE__*/_jsx(\"div\",{className:\"search-input-icon\",children:/*#__PURE__*/_jsx(Icon.Search,{})}),navbarSearch?/*#__PURE__*/_jsx(Autocomplete,{className:\"form-control\",suggestions:suggestions,filterKey:\"title\",filterHeaderKey:\"groupTitle\",grouped:true,placeholder:\"Explore Vuexy...\",autoFocus:true,onSuggestionItemClick:handleSuggestionItemClick,externalClick:handleExternalClick,clearInput:function clearInput(userInput,setUserInput){return handleClearInput(setUserInput);},onKeyDown:onKeyDown,onChange:function onChange(e){return dispatch(handleSearchQuery(e.target.value));},customRender:function customRender(item,i,filteredData,activeSuggestion,onSuggestionItemClick,onSuggestionItemHover){var IconTag=Icon[item.icon?item.icon:'X'];return/*#__PURE__*/_jsx(\"li\",{className:classnames('suggestion-item',{active:filteredData.indexOf(item)===activeSuggestion}),onClick:function onClick(e){return handleListItemClick(onSuggestionItemClick,item.link,e);},onMouseEnter:function onMouseEnter(){return onSuggestionItemHover(filteredData.indexOf(item));},children:/*#__PURE__*/_jsxs(\"div\",{className:classnames({'d-flex justify-content-between align-items-center':item.file||item.img}),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item-container d-flex\",children:[item.icon?/*#__PURE__*/_jsx(IconTag,{size:17}):item.file?/*#__PURE__*/_jsx(\"img\",{src:item.file,height:\"36\",width:\"28\",alt:item.title}):item.img?/*#__PURE__*/_jsx(\"img\",{className:\"rounded-circle mt-25\",src:item.img,height:\"28\",width:\"28\",alt:item.title}):null,/*#__PURE__*/_jsxs(\"div\",{className:\"item-info ml-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"align-middle mb-0\",children:item.title}),item.by||item.email?/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:item.by?item.by:item.email?item.email:null}):null]})]}),item.size||item.date?/*#__PURE__*/_jsx(\"div\",{className:\"meta-container\",children:/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:item.size?item.size:item.date?item.date:null})}):null]})},i);}}):null,/*#__PURE__*/_jsx(\"div\",{className:\"search-input-close\",children:/*#__PURE__*/_jsx(Icon.X,{className:\"ficon\",onClick:function onClick(e){e.stopPropagation();setNavbarSearch(false);handleClearQueryInStore();}})})]})]});};export default NavbarSearch;","map":{"version":3,"sources":["D:/nodejs/IMA/src/@core/layouts/components/navbar/NavbarSearch.js"],"names":["useEffect","useState","axios","classnames","Icon","NavItem","NavLink","useDispatch","handleSearchQuery","Autocomplete","NavbarSearch","dispatch","suggestions","setSuggestions","navbarSearch","setNavbarSearch","get","then","data","searchArr","handleClearQueryInStore","handleExternalClick","handleClearInput","setUserInput","onKeyDown","e","keyCode","setTimeout","handleSuggestionItemClick","handleListItemClick","func","link","open","userInput","target","value","item","i","filteredData","activeSuggestion","onSuggestionItemClick","onSuggestionItemHover","IconTag","icon","active","indexOf","file","img","title","by","email","size","date","stopPropagation"],"mappings":"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","sourcesContent":["// ** React Imports\r\nimport { useEffect, useState } from 'react'\r\n\r\n// ** Third Party Components\r\nimport axios from 'axios'\r\nimport classnames from 'classnames'\r\nimport * as Icon from 'react-feather'\r\nimport { NavItem, NavLink } from 'reactstrap'\r\n\r\n// ** Store & Actions\r\nimport { useDispatch } from 'react-redux'\r\nimport { handleSearchQuery } from '@store/actions/navbar'\r\n\r\n// ** Custom Components\r\nimport Autocomplete from '@components/autocomplete'\r\n\r\nconst NavbarSearch = () => {\r\n  // ** Store Vars\r\n  const dispatch = useDispatch()\r\n\r\n  // ** States\r\n  const [suggestions, setSuggestions] = useState([])\r\n  const [navbarSearch, setNavbarSearch] = useState(false)\r\n\r\n  // ** ComponentDidMount\r\n  useEffect(() => {\r\n    axios.get('/api/main-search/data').then(({ data }) => {\r\n      setSuggestions(data.searchArr)\r\n    })\r\n  }, [])\r\n\r\n  // ** Removes query in store\r\n  const handleClearQueryInStore = () => dispatch(handleSearchQuery(''))\r\n\r\n  // ** Function to handle external Input click\r\n  const handleExternalClick = () => {\r\n    if (navbarSearch === true) {\r\n      setNavbarSearch(false)\r\n      handleClearQueryInStore()\r\n    }\r\n  }\r\n\r\n  // ** Function to clear input value\r\n  const handleClearInput = setUserInput => {\r\n    if (!navbarSearch) {\r\n      setUserInput('')\r\n      handleClearQueryInStore()\r\n    }\r\n  }\r\n\r\n  // ** Function to close search on ESC & ENTER Click\r\n  const onKeyDown = e => {\r\n    if (e.keyCode === 27 || e.keyCode === 13) {\r\n      setTimeout(() => {\r\n        setNavbarSearch(false)\r\n        handleClearQueryInStore()\r\n      }, 1)\r\n    }\r\n  }\r\n\r\n  // ** Function to handle search suggestion Click\r\n  const handleSuggestionItemClick = () => {\r\n    setNavbarSearch(false)\r\n    handleClearQueryInStore()\r\n  }\r\n\r\n  // ** Function to handle search list Click\r\n  const handleListItemClick = (func, link, e) => {\r\n    func(link, e)\r\n    setTimeout(() => {\r\n      setNavbarSearch(false)\r\n    }, 1)\r\n    handleClearQueryInStore()\r\n  }\r\n\r\n  return (\r\n    <NavItem className='nav-search' onClick={() => setNavbarSearch(true)}>\r\n      <NavLink className='nav-link-search'>\r\n        <Icon.Search className='ficon' />\r\n      </NavLink>\r\n      <div\r\n        className={classnames('search-input', {\r\n          open: navbarSearch === true\r\n        })}\r\n      >\r\n        <div className='search-input-icon'>\r\n          <Icon.Search />\r\n        </div>\r\n        {navbarSearch ? (\r\n          <Autocomplete\r\n            className='form-control'\r\n            suggestions={suggestions}\r\n            filterKey='title'\r\n            filterHeaderKey='groupTitle'\r\n            grouped={true}\r\n            placeholder='Explore Vuexy...'\r\n            autoFocus={true}\r\n            onSuggestionItemClick={handleSuggestionItemClick}\r\n            externalClick={handleExternalClick}\r\n            clearInput={(userInput, setUserInput) => handleClearInput(setUserInput)}\r\n            onKeyDown={onKeyDown}\r\n            onChange={e => dispatch(handleSearchQuery(e.target.value))}\r\n            customRender={(item, i, filteredData, activeSuggestion, onSuggestionItemClick, onSuggestionItemHover) => {\r\n              const IconTag = Icon[item.icon ? item.icon : 'X']\r\n              return (\r\n                <li\r\n                  className={classnames('suggestion-item', {\r\n                    active: filteredData.indexOf(item) === activeSuggestion\r\n                  })}\r\n                  key={i}\r\n                  onClick={e => handleListItemClick(onSuggestionItemClick, item.link, e)}\r\n                  onMouseEnter={() => onSuggestionItemHover(filteredData.indexOf(item))}\r\n                >\r\n                  <div\r\n                    className={classnames({\r\n                      'd-flex justify-content-between align-items-center': item.file || item.img\r\n                    })}\r\n                  >\r\n                    <div className='item-container d-flex'>\r\n                      {item.icon ? (\r\n                        <IconTag size={17} />\r\n                      ) : item.file ? (\r\n                        <img src={item.file} height='36' width='28' alt={item.title} />\r\n                      ) : item.img ? (\r\n                        <img className='rounded-circle mt-25' src={item.img} height='28' width='28' alt={item.title} />\r\n                      ) : null}\r\n                      <div className='item-info ml-1'>\r\n                        <p className='align-middle mb-0'>{item.title}</p>\r\n                        {item.by || item.email ? (\r\n                          <small className='text-muted'>{item.by ? item.by : item.email ? item.email : null}</small>\r\n                        ) : null}\r\n                      </div>\r\n                    </div>\r\n                    {item.size || item.date ? (\r\n                      <div className='meta-container'>\r\n                        <small className='text-muted'>{item.size ? item.size : item.date ? item.date : null}</small>\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n                </li>\r\n              )\r\n            }}\r\n          />\r\n        ) : null}\r\n        <div className='search-input-close'>\r\n          <Icon.X\r\n            className='ficon'\r\n            onClick={e => {\r\n              e.stopPropagation()\r\n              setNavbarSearch(false)\r\n              handleClearQueryInStore()\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n    </NavItem>\r\n  )\r\n}\r\n\r\nexport default NavbarSearch\r\n"]},"metadata":{},"sourceType":"module"}