{"ast":null,"code":"// ** UseJWT import to get config\nimport{useState,useContext,Fragment,useEffect}from'react';import useJwt from'@src/auth/jwt/useJwt';import axios from'axios';import axiosConfig from'../../../axiosConfig';import Swal from'sweetalert2';import{data}from'jquery';import Avatar from'@components/avatar';import{useHistory}from'react-router-dom';import{Toast,ToastBody,ToastHeader}from'reactstrap';import{toast,Slide}from'react-toastify';// import 'react-toastify/dist/ReactToastify.css'\nimport app from'./../../../base';import{getAuth,signInWithCustomToken}from\"firebase/auth\";import{getHomeRouteForLoggedInUser,isObjEmpty}from'@utils';// import firebase from \"firebase/app\";\n// import \"firebase/auth\";\n// export const FB_CONFIG = {\n//     apiKey: \"AIzaSyCwB63I1xIoTJIlyz1VKkqUwQiMI-xC43k\",\n//     authDomain: \"ima-india-dev.firebaseapp.com\",\n//     projectId: \"ima-india-dev\",\n//     // storageBucket: \"ima-india-dev.appspot.com\",\n//     // messagingSenderId: \"1097438200753\",\n//     appId: \"1:1097438200753:web:ae7d84e71819fb0ed63390\",\n// }\n// const firebaseApp = firebase.initializeApp(FB_CONFIG);\n// export const firebase_auth = firebaseApp.auth();\n// const config = useJwt.jwtConfig\n// const loginAuthID = localStorage.getItem('loginId')\n// console.log(loginAuthID)\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var result;var tosterContent=function tosterContent(props){console.log(props);return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"toastify-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"title-wrapper\",children:[/*#__PURE__*/_jsx(Avatar,{size:\"sm\",color:\"warning\",icon:/*#__PURE__*/_jsx(Coffee,{size:12})}),/*#__PURE__*/_jsxs(\"h6\",{className:\"toast-title font-weight-bold\",children:[\" \",props]})]})})});};// export const forIdToken = () => {\n// app.auth().currentUser.getIdToken(false).then(function (Token) {\n// return Token\n// })\n// }\n// console.log(forIdToken())\nvar authIdToken=\"\";// ** Handle User Login\nexport var handleLogin=function handleLogin(data,props){var email=data.email_id;var password=data.password;app.auth().signInWithEmailAndPassword(email,password).then(function(user_info){console.log(user_info);localStorage.setItem(\"fbUserId\",JSON.stringify(user_info.user.uid));console.log(\"login data\",user_info.user.uid);axiosConfig.put(\"/user/getIdByEmail\",{email:data.email_id}).then(function(r){if(r.data.success===1){localStorage.setItem(\"user_id\",JSON.stringify(r.data.user.id));props.history.push('/');}else{// toast.error(r.data.message, \n// {position: toast.POSITION.TOP_RIGHT})\nSwal.fire({title:'Error!',text:'There is no user record corresponding to this identifier. The user may have been deleted.',icon:'error',confirmButtonText:'Try Again',confirmButtonColor:'#EE3224'});}});}).catch(function(err){// console.log(\"err\", err)\n// alert(\"Number not exist\")\nSwal.fire({title:'Error!',text:'There is no user record corresponding to this identifier. The user may have been deleted.',icon:'error',confirmButtonText:'Try Again',confirmButtonColor:'#EE3224'});});return function(dispatch){dispatch({type:'LOGIN',data:data// config,\n// [config.storageTokenKeyName]: data[config.storageTokenKeyName],\n// [config.storageRefreshTokenKeyName]: data[config.storageRefreshTokenKeyName]\n});// ** Add to user, accessToken & refreshToken to localStorage\n// localStorage.setItem(config.storageTokenKeyName, JSON.stringify(data.accessToken))\n// localStorage.setItem(config.storageRefreshTokenKeyName, JSON.stringify(data.refreshToken))\n};};// ** Handle User Logout\nexport var handleLogout=function handleLogout(){return function(dispatch){// app.auth().signOut().then(() => {\n// //  alert(\"signout successfull\")\n// }).catch((error) => {\n//   // An error happened.\n// })\n// dispatch({ type: 'LOGOUT'\n// //  [config.storageTokenKeyName]: null, [config.storageRefreshTokenKeyName]: null \n// })\n// ** Remove user, accessToken & refreshToken from localStorage\nlocalStorage.removeItem('user_id');localStorage.removeItem('fbUserId');// localStorage.removeItem(config.storageTokenKeyName)\n// localStorage.removeItem(config.storageRefreshTokenKeyName)\n};};export var handleForgotPassword=function handleForgotPassword(props,data){var getuserid=null;axios.post(\"http://172.105.49.15:3030/api/user/check_mobile_number_exist\",{mobile_number:data.login_phone// password:data.password\n}).then(function(r){console.log(r);var getuserid=r.data.data._id;if(r.data!==null){axios.post(\"http://172.105.49.15:3030/api/user/send_otp\",{mobile_number:data.login_phone// password:data.password\n}).then(function(r){console.log(r);console.log(getuserid);props.history.push({pathname:'/otp',state:{mobile:data.login_phone,id:getuserid}});toast.success(r.data.message,{position:toast.POSITION.TOP_RIGHT});});// toster(\"we'll send you instructions to reset your password\")\n// toast(\n//   <tosterContent name={\"we'll send you instructions to reset your password\"} role={''}/>,\n//   { transition: Slide, hideProgressBar: true, autoClose: 2000 }\n// )\n}else{toast.warning(\"Mobile number not exist\",{position:toast.POSITION.TOP_RIGHT});}});return function(dispatch){dispatch({type:'Create_New',data:data});};};export var SendOtp=function SendOtp(data,props){console.log(data,props);axios.post('http://172.105.49.15:3030/api/user/check_otp',{otp:data.login_otp}).then(function(r){console.log(r);if(r.data.status===false){toast.warning(r.data.message,{position:toast.POSITION.TOP_RIGHT});}else{toast.success(r.data.message,{position:toast.POSITION.TOP_RIGHT});props.history.push({pathname:'/resetpassword',state:props.location.state.id});}}).catch(function(err){return err;});return function(dispatch){dispatch({type:'Otp',data:data});};};export var CreatePassword=function CreatePassword(data,props){console.log(props&&props.location&&props.location.state);axios.post('http://172.105.49.15:3030/api/user/create_password',{id:props&&props.location&&props.location.state,password:data.password}).then(function(r){console.log(\"resetresponce\",r);toast.success(r.data.message,{position:toast.POSITION.TOP_RIGHT});props.history.push('/login');}).catch(function(err){return err;});return function(dispatch){dispatch({type:'Otp',data:data});};};","map":{"version":3,"sources":["D:/nodejs/IMA/src/redux/actions/auth/index.js"],"names":["useState","useContext","Fragment","useEffect","useJwt","axios","axiosConfig","Swal","data","Avatar","useHistory","Toast","ToastBody","ToastHeader","toast","Slide","app","getAuth","signInWithCustomToken","getHomeRouteForLoggedInUser","isObjEmpty","result","tosterContent","props","console","log","authIdToken","handleLogin","email","email_id","password","auth","signInWithEmailAndPassword","then","user_info","localStorage","setItem","JSON","stringify","user","uid","put","r","success","id","history","push","fire","title","text","icon","confirmButtonText","confirmButtonColor","catch","err","dispatch","type","handleLogout","removeItem","handleForgotPassword","getuserid","post","mobile_number","login_phone","_id","pathname","state","mobile","message","position","POSITION","TOP_RIGHT","warning","SendOtp","otp","login_otp","status","location","CreatePassword"],"mappings":"AAAA;AACA,OAASA,QAAT,CAAmBC,UAAnB,CAA+BC,QAA/B,CAAyCC,SAAzC,KAA0D,OAA1D,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,sBAAxB,CACA,MAAOC,CAAAA,IAAP,KAAiB,aAAjB,CAEA,OAASC,IAAT,KAAqB,QAArB,CACA,MAAOC,CAAAA,MAAP,KAAmB,oBAAnB,CACA,OAAQC,UAAR,KAAyB,kBAAzB,CACA,OAASC,KAAT,CAAgBC,SAAhB,CAA2BC,WAA3B,KAA8C,YAA9C,CACA,OAASC,KAAT,CAAgBC,KAAhB,KAA6B,gBAA7B,CACA;AACA,MAAOC,CAAAA,GAAP,KAAgB,iBAAhB,CACA,OAASC,OAAT,CAAkBC,qBAAlB,KAA+C,eAA/C,CACA,OAASC,2BAAT,CAAsCC,UAAtC,KAAwD,QAAxD,CAGA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAGA;AACA;AACA;wFACA,GAAIC,CAAAA,MAAJ,CAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,KAAD,CAAW,CAC/BC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACA,mBACE,KAAC,QAAD,wBACA,YAAK,SAAS,CAAC,iBAAf,uBACE,aAAK,SAAS,CAAC,eAAf,wBACE,KAAC,MAAD,EAAQ,IAAI,CAAC,IAAb,CAAkB,KAAK,CAAC,SAAxB,CAAkC,IAAI,cAAE,KAAC,MAAD,EAAQ,IAAI,CAAE,EAAd,EAAxC,EADF,cAEE,YAAI,SAAS,CAAC,8BAAd,eAA+CA,KAA/C,GAFF,GADF,EADA,EADF,CAaD,CAfD,CAiBA;AACA;AACA;AACA;AACA;AAGA;AAEA,GAAMG,CAAAA,WAAW,CAAG,EAApB,CAEA;AACA,MAAO,IAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACnB,IAAD,CAAOe,KAAP,CAAiB,CAC1C,GAAMK,CAAAA,KAAK,CAAGpB,IAAI,CAACqB,QAAnB,CACA,GAAMC,CAAAA,QAAQ,CAAGtB,IAAI,CAACsB,QAAtB,CACAd,GAAG,CAACe,IAAJ,GAAWC,0BAAX,CAAsCJ,KAAtC,CAA6CE,QAA7C,EACCG,IADD,CACM,SAACC,SAAD,CAAe,CACvBV,OAAO,CAACC,GAAR,CAAYS,SAAZ,EACIC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAiCC,IAAI,CAACC,SAAL,CAAeJ,SAAS,CAACK,IAAV,CAAeC,GAA9B,CAAjC,EACAhB,OAAO,CAACC,GAAR,CAAY,YAAZ,CAA0BS,SAAS,CAACK,IAAV,CAAeC,GAAzC,EAEAlC,WAAW,CAACmC,GAAZ,sBAAsC,CACpCb,KAAK,CAAEpB,IAAI,CAACqB,QADwB,CAAtC,EAGCI,IAHD,CAGM,SAAAS,CAAC,CAAI,CACb,GAAIA,CAAC,CAAClC,IAAF,CAAOmC,OAAP,GAAmB,CAAvB,CAA0B,CACtBR,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAgCC,IAAI,CAACC,SAAL,CAAeI,CAAC,CAAClC,IAAF,CAAO+B,IAAP,CAAYK,EAA3B,CAAhC,EACArB,KAAK,CAACsB,OAAN,CAAcC,IAAd,CAAmB,GAAnB,EAEH,CAJD,IAIO,CACH;AACA;AACAvC,IAAI,CAACwC,IAAL,CAAU,CACRC,KAAK,CAAE,QADC,CAERC,IAAI,CAAE,2FAFE,CAGRC,IAAI,CAAE,OAHE,CAIRC,iBAAiB,CAAE,WAJX,CAKRC,kBAAkB,CAAE,SALZ,CAAV,EAOH,CACA,CAnBC,EAoBH,CA1BC,EA2BDC,KA3BC,CA2BK,SAAAC,GAAG,CAAI,CACd;AACA;AACA/C,IAAI,CAACwC,IAAL,CAAU,CACRC,KAAK,CAAE,QADC,CAERC,IAAI,CAAE,2FAFE,CAGRC,IAAI,CAAE,OAHE,CAIRC,iBAAiB,CAAE,WAJX,CAKRC,kBAAkB,CAAE,SALZ,CAAV,EAOC,CArCC,EAsCF,MAAO,UAAAG,QAAQ,CAAI,CACjBA,QAAQ,CAAC,CACPC,IAAI,CAAE,OADC,CAEPhD,IAAI,CAAJA,IACA;AACA;AACA;AALO,CAAD,CAAR,CAOA;AAEA;AACA;AACD,CAZD,CAaC,CAtDM,CAwDP;AACA,MAAO,IAAMiD,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CAChC,MAAO,UAAAF,QAAQ,CAAI,CACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACApB,YAAY,CAACuB,UAAb,CAAwB,SAAxB,EACAvB,YAAY,CAACuB,UAAb,CAAwB,UAAxB,EAEA;AACA;AACD,CAhBD,CAiBD,CAlBM,CAoBP,MAAO,IAAMC,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAACpC,KAAD,CAAQf,IAAR,CAAiB,CACrD,GAAMoD,CAAAA,SAAS,CAAG,IAAlB,CACEvD,KAAK,CAACwD,IAAN,gEAA2E,CACzEC,aAAa,CAACtD,IAAI,CAACuD,WACnB;AAFyE,CAA3E,EAID9B,IAJC,CAII,SAAAS,CAAC,CAAI,CACTlB,OAAO,CAACC,GAAR,CAAYiB,CAAZ,EACD,GAAMkB,CAAAA,SAAS,CAAGlB,CAAC,CAAClC,IAAF,CAAOA,IAAP,CAAYwD,GAA9B,CACE,GAAItB,CAAC,CAAClC,IAAF,GAAW,IAAf,CAAqB,CACpBH,KAAK,CAACwD,IAAN,+CAA0D,CACxDC,aAAa,CAACtD,IAAI,CAACuD,WACnB;AAFwD,CAA1D,EAID9B,IAJC,CAII,SAAAS,CAAC,CAAI,CACTlB,OAAO,CAACC,GAAR,CAAYiB,CAAZ,EACAlB,OAAO,CAACC,GAAR,CAAYmC,SAAZ,EACArC,KAAK,CAACsB,OAAN,CAAcC,IAAd,CAAmB,CAACmB,QAAQ,CAAC,MAAV,CACnBC,KAAK,CAAG,CACPC,MAAM,CAAG3D,IAAI,CAACuD,WADP,CAEPnB,EAAE,CAAEgB,SAFG,CADW,CAAnB,EAMF9C,KAAK,CAAC6B,OAAN,CAAcD,CAAC,CAAClC,IAAF,CAAO4D,OAArB,CACE,CAACC,QAAQ,CAAEvD,KAAK,CAACwD,QAAN,CAAeC,SAA1B,CADF,EAEC,CAfC,EAiBF;AAEA;AACA;AACA;AACA;AAGC,CA1BA,IA0BM,CACLzD,KAAK,CAAC0D,OAAN,CAAc,yBAAd,CACA,CAACH,QAAQ,CAAEvD,KAAK,CAACwD,QAAN,CAAeC,SAA1B,CADA,EAED,CACA,CArCD,EAwCA,MAAO,UAAAhB,QAAQ,CAAI,CACjBA,QAAQ,CAAC,CAAEC,IAAI,CAAE,YAAR,CAAsBhD,IAAI,CAAJA,IAAtB,CAAD,CAAR,CACD,CAFD,CAGD,CA7CM,CA+CP,MAAO,IAAMiE,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACjE,IAAD,CAAOe,KAAP,CAAiB,CACtCC,OAAO,CAACC,GAAR,CAAYjB,IAAZ,CAAkBe,KAAlB,EACElB,KAAK,CAACwD,IAAN,CAAW,8CAAX,CAA2D,CACzDa,GAAG,CAAClE,IAAI,CAACmE,SADgD,CAA3D,EAIC1C,IAJD,CAIM,SAAAS,CAAC,CAAI,CACTlB,OAAO,CAACC,GAAR,CAAYiB,CAAZ,EACA,GAAIA,CAAC,CAAClC,IAAF,CAAOoE,MAAP,GAAkB,KAAtB,CAA6B,CAC3B9D,KAAK,CAAC0D,OAAN,CAAc9B,CAAC,CAAClC,IAAF,CAAO4D,OAArB,CACA,CAACC,QAAQ,CAAEvD,KAAK,CAACwD,QAAN,CAAeC,SAA1B,CADA,EAED,CAHD,IAGO,CACLzD,KAAK,CAAC6B,OAAN,CAAcD,CAAC,CAAClC,IAAF,CAAO4D,OAArB,CACA,CAACC,QAAQ,CAAEvD,KAAK,CAACwD,QAAN,CAAeC,SAA1B,CADA,EAEFhD,KAAK,CAACsB,OAAN,CAAcC,IAAd,CAAmB,CAACmB,QAAQ,CAAC,gBAAV,CACnBC,KAAK,CAAC3C,KAAK,CAACsD,QAAN,CAAeX,KAAf,CAAqBtB,EADR,CAAnB,EAGC,CAEJ,CAjBC,EAkBCS,KAlBD,CAkBO,SAAAC,GAAG,QAAIA,CAAAA,GAAJ,EAlBV,EAoBF,MAAO,UAAAC,QAAQ,CAAI,CACjBA,QAAQ,CAAC,CAAEC,IAAI,CAAE,KAAR,CAAehD,IAAI,CAAJA,IAAf,CAAD,CAAR,CACD,CAFD,CAGD,CAzBM,CA2BP,MAAO,IAAMsE,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACtE,IAAD,CAAOe,KAAP,CAAiB,CAC7CC,OAAO,CAACC,GAAR,CAAYF,KAAK,EAAIA,KAAK,CAACsD,QAAf,EAA2BtD,KAAK,CAACsD,QAAN,CAAeX,KAAtD,EACA7D,KAAK,CAACwD,IAAN,CAAW,oDAAX,CAAiE,CAC/DjB,EAAE,CAACrB,KAAK,EAAIA,KAAK,CAACsD,QAAf,EAA2BtD,KAAK,CAACsD,QAAN,CAAeX,KADkB,CAE/DpC,QAAQ,CAACtB,IAAI,CAACsB,QAFiD,CAAjE,EAICG,IAJD,CAIM,SAAAS,CAAC,CAAI,CACTlB,OAAO,CAACC,GAAR,CAAY,eAAZ,CAA6BiB,CAA7B,EACA5B,KAAK,CAAC6B,OAAN,CAAcD,CAAC,CAAClC,IAAF,CAAO4D,OAArB,CACA,CAACC,QAAQ,CAAEvD,KAAK,CAACwD,QAAN,CAAeC,SAA1B,CADA,EAEFhD,KAAK,CAACsB,OAAN,CAAcC,IAAd,CAAmB,QAAnB,EACD,CATC,EAUCO,KAVD,CAUO,SAAAC,GAAG,QAAIA,CAAAA,GAAJ,EAVV,EAYF,MAAO,UAAAC,QAAQ,CAAI,CACjBA,QAAQ,CAAC,CAAEC,IAAI,CAAE,KAAR,CAAehD,IAAI,CAAJA,IAAf,CAAD,CAAR,CACD,CAFD,CAGC,CAjBM","sourcesContent":["// ** UseJWT import to get config\r\nimport { useState, useContext, Fragment, useEffect } from 'react'\r\nimport useJwt from '@src/auth/jwt/useJwt'\r\nimport axios from 'axios'\r\nimport axiosConfig from '../../../axiosConfig'\r\nimport Swal from 'sweetalert2'\r\n\r\nimport { data } from 'jquery'\r\nimport Avatar from '@components/avatar'\r\nimport {useHistory} from 'react-router-dom'\r\nimport { Toast, ToastBody, ToastHeader } from 'reactstrap'\r\nimport { toast, Slide } from 'react-toastify'\r\n// import 'react-toastify/dist/ReactToastify.css'\r\nimport app from './../../../base'\r\nimport { getAuth, signInWithCustomToken } from \"firebase/auth\"\r\nimport { getHomeRouteForLoggedInUser, isObjEmpty } from '@utils'\r\n\r\n\r\n// import firebase from \"firebase/app\";\r\n// import \"firebase/auth\";\r\n\r\n// export const FB_CONFIG = {\r\n//     apiKey: \"AIzaSyCwB63I1xIoTJIlyz1VKkqUwQiMI-xC43k\",\r\n//     authDomain: \"ima-india-dev.firebaseapp.com\",\r\n//     projectId: \"ima-india-dev\",\r\n//     // storageBucket: \"ima-india-dev.appspot.com\",\r\n//     // messagingSenderId: \"1097438200753\",\r\n//     appId: \"1:1097438200753:web:ae7d84e71819fb0ed63390\",\r\n// }\r\n\r\n// const firebaseApp = firebase.initializeApp(FB_CONFIG);\r\n// export const firebase_auth = firebaseApp.auth();\r\n\r\n\r\n// const config = useJwt.jwtConfig\r\n// const loginAuthID = localStorage.getItem('loginId')\r\n// console.log(loginAuthID)\r\nlet result\r\n\r\nconst tosterContent = (props) => {\r\n  console.log(props)\r\n  return (\r\n    <Fragment>\r\n    <div className='toastify-header'>\r\n      <div className='title-wrapper'>\r\n        <Avatar size='sm' color='warning' icon={<Coffee size={12} />} />\r\n        <h6 className='toast-title font-weight-bold'> {props}</h6>\r\n      </div>\r\n    </div>\r\n    {/* <div className='toastify-body'>\r\n      <span>You have successfully logged in as an {role}. Now you can start to explore. Enjoy!</span>\r\n    </div> */}\r\n  </Fragment>\r\n  )\r\n}\r\n\r\n// export const forIdToken = () => {\r\n// app.auth().currentUser.getIdToken(false).then(function (Token) {\r\n// return Token\r\n// })\r\n// }\r\n\r\n\r\n// console.log(forIdToken())\r\n\r\nconst authIdToken = \"\"\r\n\r\n// ** Handle User Login\r\nexport const handleLogin = (data, props) => {\r\n  const email = data.email_id\r\n  const password = data.password\r\n  app.auth().signInWithEmailAndPassword(email, password)\r\n  .then((user_info) => {\r\nconsole.log(user_info)\r\n    localStorage.setItem(\"fbUserId\", JSON.stringify(user_info.user.uid))\r\n    console.log(\"login data\", user_info.user.uid)\r\n\r\n    axiosConfig.put(`/user/getIdByEmail`, {\r\n      email: data.email_id \r\n    }) \r\n    .then(r => {\r\n  if (r.data.success === 1) {\r\n      localStorage.setItem(\"user_id\", JSON.stringify(r.data.user.id))\r\n      props.history.push('/')\r\n\r\n  } else {\r\n      // toast.error(r.data.message, \r\n      // {position: toast.POSITION.TOP_RIGHT})\r\n      Swal.fire({\r\n        title: 'Error!',\r\n        text: 'There is no user record corresponding to this identifier. The user may have been deleted.',\r\n        icon: 'error',\r\n        confirmButtonText: 'Try Again',\r\n        confirmButtonColor: '#EE3224'\r\n      })\r\n  }\r\n  })\r\n})\r\n.catch(err => {\r\n// console.log(\"err\", err)\r\n// alert(\"Number not exist\")\r\nSwal.fire({\r\n  title: 'Error!',\r\n  text: 'There is no user record corresponding to this identifier. The user may have been deleted.',\r\n  icon: 'error',\r\n  confirmButtonText: 'Try Again',\r\n  confirmButtonColor: '#EE3224'\r\n})\r\n})\r\nreturn dispatch => {\r\n  dispatch({\r\n    type: 'LOGIN',\r\n    data\r\n    // config,\r\n    // [config.storageTokenKeyName]: data[config.storageTokenKeyName],\r\n    // [config.storageRefreshTokenKeyName]: data[config.storageRefreshTokenKeyName]\r\n  })\r\n  // ** Add to user, accessToken & refreshToken to localStorage\r\n\r\n  // localStorage.setItem(config.storageTokenKeyName, JSON.stringify(data.accessToken))\r\n  // localStorage.setItem(config.storageRefreshTokenKeyName, JSON.stringify(data.refreshToken))\r\n}\r\n}\r\n\r\n// ** Handle User Logout\r\nexport const handleLogout = () => {\r\n  return dispatch => {\r\n    // app.auth().signOut().then(() => {\r\n    // //  alert(\"signout successfull\")\r\n    // }).catch((error) => {\r\n    //   // An error happened.\r\n    // })\r\n    // dispatch({ type: 'LOGOUT'\r\n    // //  [config.storageTokenKeyName]: null, [config.storageRefreshTokenKeyName]: null \r\n    // })\r\n\r\n    // ** Remove user, accessToken & refreshToken from localStorage\r\n    localStorage.removeItem('user_id')\r\n    localStorage.removeItem('fbUserId')\r\n\r\n    // localStorage.removeItem(config.storageTokenKeyName)\r\n    // localStorage.removeItem(config.storageRefreshTokenKeyName)\r\n  }\r\n}\r\n\r\nexport const handleForgotPassword = (props, data) => {\r\nconst getuserid = null\r\n  axios.post(`http://172.105.49.15:3030/api/user/check_mobile_number_exist`, {\r\n    mobile_number:data.login_phone\r\n    // password:data.password\r\n})\r\n.then(r => { \r\n  console.log(r)\r\n const getuserid = r.data.data._id\r\n   if (r.data !== null) {\r\n    axios.post(`http://172.105.49.15:3030/api/user/send_otp`, {\r\n      mobile_number:data.login_phone\r\n      // password:data.password\r\n  })\r\n  .then(r => {\r\n    console.log(r)\r\n    console.log(getuserid)\r\n    props.history.push({pathname:'/otp',\r\n    state : {\r\n     mobile : data.login_phone,\r\n     id: getuserid\r\n    }\r\n  })\r\n  toast.success(r.data.message, \r\n    {position: toast.POSITION.TOP_RIGHT})\r\n  })\r\n \r\n  // toster(\"we'll send you instructions to reset your password\")\r\n\r\n  // toast(\r\n  //   <tosterContent name={\"we'll send you instructions to reset your password\"} role={''}/>,\r\n  //   { transition: Slide, hideProgressBar: true, autoClose: 2000 }\r\n  // )\r\n \r\n\r\n  } else {\r\n    toast.warning(\"Mobile number not exist\", \r\n    {position: toast.POSITION.TOP_RIGHT})\r\n  }\r\n  })\r\n\r\n\r\n  return dispatch => {\r\n    dispatch({ type: 'Create_New', data })\r\n  }\r\n}\r\n\r\nexport const SendOtp = (data, props) => {\r\n  console.log(data, props)\r\n    axios.post('http://172.105.49.15:3030/api/user/check_otp', {\r\n      otp:data.login_otp\r\n\r\n    })\r\n    .then(r => {   \r\n      console.log(r)\r\n      if (r.data.status === false) {\r\n        toast.warning(r.data.message, \r\n        {position: toast.POSITION.TOP_RIGHT})\r\n      } else {\r\n        toast.success(r.data.message, \r\n        {position: toast.POSITION.TOP_RIGHT})\r\n      props.history.push({pathname:'/resetpassword',\r\n      state:props.location.state.id\r\n    })\r\n      }\r\n \r\n  })\r\n    .catch(err => err)\r\n\r\n  return dispatch => {\r\n    dispatch({ type: 'Otp', data })\r\n  }\r\n}\r\n\r\nexport const CreatePassword = (data, props) => {\r\n  console.log(props && props.location && props.location.state)\r\n  axios.post('http://172.105.49.15:3030/api/user/create_password', {\r\n    id:props && props.location && props.location.state,\r\n    password:data.password\r\n  })\r\n  .then(r => {   \r\n    console.log(\"resetresponce\", r)\r\n    toast.success(r.data.message, \r\n    {position: toast.POSITION.TOP_RIGHT})\r\n  props.history.push('/login')\r\n})\r\n  .catch(err => err)\r\n\r\nreturn dispatch => {\r\n  dispatch({ type: 'Otp', data })\r\n}\r\n}"]},"metadata":{},"sourceType":"module"}