{"ast":null,"code":"var _jsxFileName = \"D:\\\\nodejs\\\\IMA\\\\src\\\\redux\\\\actions\\\\auth\\\\index.js\",\n    _this = this;\n\n// ** UseJWT import to get config\nimport { useState, useContext, Fragment, useEffect } from 'react';\nimport useJwt from '@src/auth/jwt/useJwt';\nimport axios from 'axios';\nimport { data } from 'jquery';\nimport Avatar from '@components/avatar';\nimport { useHistory } from 'react-router-dom';\nimport { Toast, ToastBody, ToastHeader } from 'reactstrap';\nimport { toast, Slide } from 'react-toastify'; // import 'react-toastify/dist/ReactToastify.css'\n\nimport app from './../../../base';\nimport { getAuth, signInWithCustomToken } from \"firebase/auth\";\nimport { getHomeRouteForLoggedInUser, isObjEmpty } from '@utils';\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar FB_CONFIG = {\n  apiKey: \"AIzaSyCwB63I1xIoTJIlyz1VKkqUwQiMI-xC43k\",\n  authDomain: \"ima-india-dev.firebaseapp.com\",\n  projectId: \"ima-india-dev\",\n  // storageBucket: \"ima-india-dev.appspot.com\",\n  // messagingSenderId: \"1097438200753\",\n  appId: \"1:1097438200753:web:ae7d84e71819fb0ed63390\"\n};\nvar firebaseApp = firebase.initializeApp(FB_CONFIG); // export const firebase_auth = firebaseApp.auth();\n// const config = useJwt.jwtConfig\n// const loginAuthID = localStorage.getItem('loginId')\n// console.log(loginAuthID)\n\nvar result;\n\nvar tosterContent = function tosterContent(props) {\n  console.log(props);\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"toastify-header\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"title-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(Avatar, {\n          size: \"sm\",\n          color: \"warning\",\n          icon: /*#__PURE__*/_jsxDEV(Coffee, {\n            size: 12\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 49\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 9\n        }, _this), /*#__PURE__*/_jsxDEV(\"h6\", {\n          className: \"toast-title font-weight-bold\",\n          children: [\" \", props]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 9\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 7\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 5\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, _this);\n}; // export const forIdToken = () => {\n// app.auth().currentUser.getIdToken(false).then(function (Token) {\n// return Token\n// })\n// }\n// console.log(forIdToken())\n\n\nvar authIdToken = \"\"; // ** Handle User Login\n\nexport var handleLogin = function handleLogin(data, props) {\n  var email = data.email_id;\n  var password = data.password;\n  firebaseApp.auth().signInWithEmailAndPassword(email, password).then(function (data) {\n    console.log(JSON.stringify(data.user));\n  }) //   console.log(data)\n  //   axios.put(`http://65.1.145.79/user/userLogin`, {\n  //     email:data.email_id,\n  //     password:data.password\n  //    }, \n  //   {\n  //  auth: {\n  //     username: \"asuWorks\",\n  //     password: \"ergbhjwfvbhjkegvfvkgbhjbhjksfdgvsdjfvhnklhnjklhjkSJKHhjkBHJKbhjkhjkkjBHJvHJKBHJK\"\n  //   }\n  // }) \n  // .then(r => {\n  //   console.log(r)\n  //   if (r.data.status === true) {\n  //     console.log(\"sadasd\", r)\n  //     props.history.push('/dashboard')\n  //     localStorage.setItem('loginId', r.data)\n  //     localStorage.setItem('token', r.data.token)\n  //     // localStorage.setItem('userData', JSON.stringify(data))\n  //   } else {\n  //     toast.error(r.data.message, \n  //       {position: toast.POSITION.TOP_RIGHT})\n  //   }\n  //   const Token = r.data.token\n  //   console.log(\"loginToken\", Token)\n  //   app.auth().signInWithCustomToken(Token)\n  //     .then((userCredential) => {\n  //       // Signed in\n  //       const user = userCredential.user\n  //       console.log('User login successfully', userCredential)\n  //     })\n  //     .catch((error) => {\n  //       const errorCode = error.code\n  //       const errorMessage = error.message\n  //       console.log('User login fail')\n  //       console.log(errorMessage)\n  //     })\n  //   .then(function () {\n  //    app.auth().currentUser.getIdToken(false).then(function (Token) {\n  //      sessionStorage.setItem('id_token', Token)\n  //      console.log(Token)\n  //    })\n  // })\n  // .catch(function (error) {\n  //    console.log(\"error\", error)\n  // })\n  // })\n  .catch(function (err) {// alert(\"Number not exist\")\n  });\n  return function (dispatch) {\n    dispatch({\n      type: 'LOGIN',\n      data: data // config,\n      // [config.storageTokenKeyName]: data[config.storageTokenKeyName],\n      // [config.storageRefreshTokenKeyName]: data[config.storageRefreshTokenKeyName]\n\n    }); // ** Add to user, accessToken & refreshToken to localStorage\n    // localStorage.setItem(config.storageTokenKeyName, JSON.stringify(data.accessToken))\n    // localStorage.setItem(config.storageRefreshTokenKeyName, JSON.stringify(data.refreshToken))\n  };\n}; // ** Handle User Logout\n\nexport var handleLogout = function handleLogout() {\n  return function (dispatch) {\n    app.auth().signOut().then(function () {//  alert(\"signout successfull\")\n    }).catch(function (error) {// An error happened.\n    });\n    dispatch({\n      type: 'LOGOUT' //  [config.storageTokenKeyName]: null, [config.storageRefreshTokenKeyName]: null \n\n    }); // ** Remove user, accessToken & refreshToken from localStorage\n\n    localStorage.removeItem('userData'); // localStorage.removeItem(config.storageTokenKeyName)\n    // localStorage.removeItem(config.storageRefreshTokenKeyName)\n  };\n};\nexport var handleForgotPassword = function handleForgotPassword(props, data) {\n  var getuserid = null;\n  axios.post(\"http://172.105.49.15:3030/api/user/check_mobile_number_exist\", {\n    mobile_number: data.login_phone // password:data.password\n\n  }).then(function (r) {\n    console.log(r);\n    var getuserid = r.data.data._id;\n\n    if (r.data !== null) {\n      axios.post(\"http://172.105.49.15:3030/api/user/send_otp\", {\n        mobile_number: data.login_phone // password:data.password\n\n      }).then(function (r) {\n        console.log(r);\n        console.log(getuserid);\n        props.history.push({\n          pathname: '/otp',\n          state: {\n            mobile: data.login_phone,\n            id: getuserid\n          }\n        });\n        toast.success(r.data.message, {\n          position: toast.POSITION.TOP_RIGHT\n        });\n      }); // toster(\"we'll send you instructions to reset your password\")\n      // toast(\n      //   <tosterContent name={\"we'll send you instructions to reset your password\"} role={''}/>,\n      //   { transition: Slide, hideProgressBar: true, autoClose: 2000 }\n      // )\n    } else {\n      toast.warning(\"Mobile number not exist\", {\n        position: toast.POSITION.TOP_RIGHT\n      });\n    }\n  });\n  return function (dispatch) {\n    dispatch({\n      type: 'Create_New',\n      data: data\n    });\n  };\n};\nexport var SendOtp = function SendOtp(data, props) {\n  console.log(data, props);\n  axios.post('http://172.105.49.15:3030/api/user/check_otp', {\n    otp: data.login_otp\n  }).then(function (r) {\n    console.log(r);\n\n    if (r.data.status === false) {\n      toast.warning(r.data.message, {\n        position: toast.POSITION.TOP_RIGHT\n      });\n    } else {\n      toast.success(r.data.message, {\n        position: toast.POSITION.TOP_RIGHT\n      });\n      props.history.push({\n        pathname: '/resetpassword',\n        state: props.location.state.id\n      });\n    }\n  }).catch(function (err) {\n    return err;\n  });\n  return function (dispatch) {\n    dispatch({\n      type: 'Otp',\n      data: data\n    });\n  };\n};\n_c = SendOtp;\nexport var CreatePassword = function CreatePassword(data, props) {\n  console.log(props && props.location && props.location.state);\n  axios.post('http://172.105.49.15:3030/api/user/create_password', {\n    id: props && props.location && props.location.state,\n    password: data.password\n  }).then(function (r) {\n    console.log(\"resetresponce\", r);\n    toast.success(r.data.message, {\n      position: toast.POSITION.TOP_RIGHT\n    });\n    props.history.push('/login');\n  }).catch(function (err) {\n    return err;\n  });\n  return function (dispatch) {\n    dispatch({\n      type: 'Otp',\n      data: data\n    });\n  };\n};\n_c2 = CreatePassword;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"SendOtp\");\n$RefreshReg$(_c2, \"CreatePassword\");","map":{"version":3,"sources":["D:/nodejs/IMA/src/redux/actions/auth/index.js"],"names":["useState","useContext","Fragment","useEffect","useJwt","axios","data","Avatar","useHistory","Toast","ToastBody","ToastHeader","toast","Slide","app","getAuth","signInWithCustomToken","getHomeRouteForLoggedInUser","isObjEmpty","firebase","FB_CONFIG","apiKey","authDomain","projectId","appId","firebaseApp","initializeApp","result","tosterContent","props","console","log","authIdToken","handleLogin","email","email_id","password","auth","signInWithEmailAndPassword","then","JSON","stringify","user","catch","err","dispatch","type","handleLogout","signOut","error","localStorage","removeItem","handleForgotPassword","getuserid","post","mobile_number","login_phone","r","_id","history","push","pathname","state","mobile","id","success","message","position","POSITION","TOP_RIGHT","warning","SendOtp","otp","login_otp","status","location","CreatePassword"],"mappings":"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","sourcesContent":["// ** UseJWT import to get config\r\nimport { useState, useContext, Fragment, useEffect } from 'react'\r\nimport useJwt from '@src/auth/jwt/useJwt'\r\nimport axios from 'axios'\r\nimport { data } from 'jquery'\r\nimport Avatar from '@components/avatar'\r\nimport {useHistory} from 'react-router-dom'\r\nimport { Toast, ToastBody, ToastHeader } from 'reactstrap'\r\nimport { toast, Slide } from 'react-toastify'\r\n// import 'react-toastify/dist/ReactToastify.css'\r\nimport app from './../../../base'\r\nimport { getAuth, signInWithCustomToken } from \"firebase/auth\"\r\nimport { getHomeRouteForLoggedInUser, isObjEmpty } from '@utils'\r\n\r\n\r\nimport firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\n\r\n const FB_CONFIG = {\r\n    apiKey: \"AIzaSyCwB63I1xIoTJIlyz1VKkqUwQiMI-xC43k\",\r\n    authDomain: \"ima-india-dev.firebaseapp.com\",\r\n    projectId: \"ima-india-dev\",\r\n    // storageBucket: \"ima-india-dev.appspot.com\",\r\n    // messagingSenderId: \"1097438200753\",\r\n    appId: \"1:1097438200753:web:ae7d84e71819fb0ed63390\",\r\n}\r\n\r\nconst firebaseApp = firebase.initializeApp(FB_CONFIG);\r\n// export const firebase_auth = firebaseApp.auth();\r\n\r\n\r\n// const config = useJwt.jwtConfig\r\n// const loginAuthID = localStorage.getItem('loginId')\r\n// console.log(loginAuthID)\r\nlet result\r\n\r\nconst tosterContent = (props) => {\r\n  console.log(props)\r\n  return (\r\n    <Fragment>\r\n    <div className='toastify-header'>\r\n      <div className='title-wrapper'>\r\n        <Avatar size='sm' color='warning' icon={<Coffee size={12} />} />\r\n        <h6 className='toast-title font-weight-bold'> {props}</h6>\r\n      </div>\r\n    </div>\r\n    {/* <div className='toastify-body'>\r\n      <span>You have successfully logged in as an {role}. Now you can start to explore. Enjoy!</span>\r\n    </div> */}\r\n  </Fragment>\r\n  )\r\n}\r\n\r\n// export const forIdToken = () => {\r\n// app.auth().currentUser.getIdToken(false).then(function (Token) {\r\n// return Token\r\n// })\r\n// }\r\n\r\n\r\n// console.log(forIdToken())\r\n\r\nconst authIdToken = \"\"\r\n\r\n// ** Handle User Login\r\nexport const handleLogin = (data, props) => {\r\n\r\n\r\n  const email = data.email_id\r\n  const password = data.password\r\n\r\n  firebaseApp.auth().signInWithEmailAndPassword(email, password)\r\n  .then((data) => {\r\n    console.log(JSON.stringify(data.user))\r\n  })\r\n//   console.log(data)\r\n//   axios.put(`http://65.1.145.79/user/userLogin`, {\r\n//     email:data.email_id,\r\n//     password:data.password\r\n//    }, \r\n//   {\r\n//  auth: {\r\n//     username: \"asuWorks\",\r\n//     password: \"ergbhjwfvbhjkegvfvkgbhjbhjksfdgvsdjfvhnklhnjklhjkSJKHhjkBHJKbhjkhjkkjBHJvHJKBHJK\"\r\n//   }\r\n// }) \r\n// .then(r => {\r\n//   console.log(r)\r\n//   if (r.data.status === true) {\r\n//     console.log(\"sadasd\", r)\r\n//     props.history.push('/dashboard')\r\n    \r\n//     localStorage.setItem('loginId', r.data)\r\n//     localStorage.setItem('token', r.data.token)\r\n    \r\n//     // localStorage.setItem('userData', JSON.stringify(data))\r\n//   } else {\r\n//     toast.error(r.data.message, \r\n//       {position: toast.POSITION.TOP_RIGHT})\r\n//   }\r\n\r\n\r\n//   const Token = r.data.token\r\n//   console.log(\"loginToken\", Token)\r\n//   app.auth().signInWithCustomToken(Token)\r\n//     .then((userCredential) => {\r\n//       // Signed in\r\n//       const user = userCredential.user\r\n//       console.log('User login successfully', userCredential)\r\n//     })\r\n//     .catch((error) => {\r\n//       const errorCode = error.code\r\n//       const errorMessage = error.message\r\n//       console.log('User login fail')\r\n//       console.log(errorMessage)\r\n//     })\r\n//   .then(function () {\r\n//    app.auth().currentUser.getIdToken(false).then(function (Token) {\r\n//      sessionStorage.setItem('id_token', Token)\r\n//      console.log(Token)\r\n//    })\r\n// })\r\n// .catch(function (error) {\r\n//    console.log(\"error\", error)\r\n// })\r\n\r\n// })\r\n.catch(err => {\r\n// alert(\"Number not exist\")\r\n})\r\nreturn dispatch => {\r\n  dispatch({\r\n    type: 'LOGIN',\r\n    data\r\n    // config,\r\n    // [config.storageTokenKeyName]: data[config.storageTokenKeyName],\r\n    // [config.storageRefreshTokenKeyName]: data[config.storageRefreshTokenKeyName]\r\n  })\r\n  // ** Add to user, accessToken & refreshToken to localStorage\r\n\r\n  // localStorage.setItem(config.storageTokenKeyName, JSON.stringify(data.accessToken))\r\n  // localStorage.setItem(config.storageRefreshTokenKeyName, JSON.stringify(data.refreshToken))\r\n}\r\n}\r\n\r\n// ** Handle User Logout\r\nexport const handleLogout = () => {\r\n  return dispatch => {\r\n    app.auth().signOut().then(() => {\r\n    //  alert(\"signout successfull\")\r\n    }).catch((error) => {\r\n      // An error happened.\r\n    })\r\n    dispatch({ type: 'LOGOUT'\r\n    //  [config.storageTokenKeyName]: null, [config.storageRefreshTokenKeyName]: null \r\n    })\r\n\r\n    // ** Remove user, accessToken & refreshToken from localStorage\r\n    localStorage.removeItem('userData')\r\n    // localStorage.removeItem(config.storageTokenKeyName)\r\n    // localStorage.removeItem(config.storageRefreshTokenKeyName)\r\n  }\r\n}\r\n\r\nexport const handleForgotPassword = (props, data) => {\r\nconst getuserid = null\r\n  axios.post(`http://172.105.49.15:3030/api/user/check_mobile_number_exist`, {\r\n    mobile_number:data.login_phone\r\n    // password:data.password\r\n})\r\n.then(r => { \r\n  console.log(r)\r\n const getuserid = r.data.data._id\r\n   if (r.data !== null) {\r\n    axios.post(`http://172.105.49.15:3030/api/user/send_otp`, {\r\n      mobile_number:data.login_phone\r\n      // password:data.password\r\n  })\r\n  .then(r => {\r\n    console.log(r)\r\n    console.log(getuserid)\r\n    props.history.push({pathname:'/otp',\r\n    state : {\r\n     mobile : data.login_phone,\r\n     id: getuserid\r\n    }\r\n  })\r\n  toast.success(r.data.message, \r\n    {position: toast.POSITION.TOP_RIGHT})\r\n  })\r\n \r\n  // toster(\"we'll send you instructions to reset your password\")\r\n\r\n  // toast(\r\n  //   <tosterContent name={\"we'll send you instructions to reset your password\"} role={''}/>,\r\n  //   { transition: Slide, hideProgressBar: true, autoClose: 2000 }\r\n  // )\r\n \r\n\r\n  } else {\r\n    toast.warning(\"Mobile number not exist\", \r\n    {position: toast.POSITION.TOP_RIGHT})\r\n  }\r\n  })\r\n\r\n\r\n  return dispatch => {\r\n    dispatch({ type: 'Create_New', data })\r\n  }\r\n}\r\n\r\nexport const SendOtp = (data, props) => {\r\n  console.log(data, props)\r\n    axios.post('http://172.105.49.15:3030/api/user/check_otp', {\r\n      otp:data.login_otp\r\n\r\n    })\r\n    .then(r => {   \r\n      console.log(r)\r\n      if (r.data.status === false) {\r\n        toast.warning(r.data.message, \r\n        {position: toast.POSITION.TOP_RIGHT})\r\n      } else {\r\n        toast.success(r.data.message, \r\n        {position: toast.POSITION.TOP_RIGHT})\r\n      props.history.push({pathname:'/resetpassword',\r\n      state:props.location.state.id\r\n    })\r\n      }\r\n \r\n  })\r\n    .catch(err => err)\r\n\r\n  return dispatch => {\r\n    dispatch({ type: 'Otp', data })\r\n  }\r\n}\r\n\r\nexport const CreatePassword = (data, props) => {\r\n  console.log(props && props.location && props.location.state)\r\n  axios.post('http://172.105.49.15:3030/api/user/create_password', {\r\n    id:props && props.location && props.location.state,\r\n    password:data.password\r\n  })\r\n  .then(r => {   \r\n    console.log(\"resetresponce\", r)\r\n    toast.success(r.data.message, \r\n    {position: toast.POSITION.TOP_RIGHT})\r\n  props.history.push('/login')\r\n})\r\n  .catch(err => err)\r\n\r\nreturn dispatch => {\r\n  dispatch({ type: 'Otp', data })\r\n}\r\n}"]},"metadata":{},"sourceType":"module"}