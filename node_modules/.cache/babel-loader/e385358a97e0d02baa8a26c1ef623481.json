{"ast":null,"code":"import _defineProperty from \"C:/Users/Shree/Downloads/newproject/full-version/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"C:/Users/Shree/Downloads/newproject/full-version/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Shree\\\\Downloads\\\\newproject\\\\full-version\\\\src\\\\views\\\\pages\\\\authentication\\\\Otp.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { useState, useContext, Fragment, useEffect } from 'react';\nimport classnames from 'classnames';\nimport Avatar from '@components/avatar';\nimport { useSkin } from '@hooks/useSkin';\nimport useJwt from '@src/auth/jwt/useJwt';\nimport { useDispatch } from 'react-redux';\nimport { useForm } from 'react-hook-form';\nimport { toast, Slide } from 'react-toastify';\nimport { SendOtp } from '@store/actions/auth';\nimport { AbilityContext } from '@src/utility/context/Can';\nimport { Link, useHistory } from 'react-router-dom';\nimport InputPasswordToggle from '@components/input-password-toggle';\nimport { withRouter } from 'react-router';\nimport { getHomeRouteForLoggedInUser, isObjEmpty } from '@utils';\nimport { Facebook, Twitter, Mail, GitHub, HelpCircle, Coffee } from 'react-feather';\nimport { Alert, Row, Col, CardTitle, CardText, Form, Input, FormGroup, Label, CustomInput, Button, UncontrolledTooltip } from 'reactstrap';\nimport axios from 'axios';\nimport '@styles/base/pages/page-auth.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar ToastContent = function ToastContent(_ref) {\n  var name = _ref.name,\n      role = _ref.role;\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"toastify-header\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"title-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(Avatar, {\n          size: \"sm\",\n          color: \"success\",\n          icon: /*#__PURE__*/_jsxDEV(Coffee, {\n            size: 12\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 37,\n            columnNumber: 49\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 9\n        }, _this), /*#__PURE__*/_jsxDEV(\"h6\", {\n          className: \"toast-title font-weight-bold\",\n          children: [\"Welcome, \", name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 9\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 7\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 5\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"toastify-body\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"You have successfully logged in as an \", role, \". Now you can start to explore. Enjoy!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 7\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 5\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 3\n  }, _this);\n};\n\n_c = ToastContent;\n\nvar OtpCreator = function OtpCreator(props) {\n  _s();\n\n  var _jsxDEV2;\n\n  var _useSkin = useSkin(),\n      _useSkin2 = _slicedToArray(_useSkin, 2),\n      skin = _useSkin2[0],\n      setSkin = _useSkin2[1];\n\n  var ability = useContext(AbilityContext);\n  var dispatch = useDispatch();\n  var history = useHistory();\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      phone = _useState2[0],\n      setPhone = _useState2[1];\n\n  var _useState3 = useState(30),\n      _useState4 = _slicedToArray(_useState3, 2),\n      count = _useState4[0],\n      setCount = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      password = _useState6[0],\n      setOtp = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      existmobile = _useState8[0],\n      setExistMobile = _useState8[1]; // console.log(existmobile)\n\n\n  var _useForm = useForm(),\n      register = _useForm.register,\n      errors = _useForm.errors,\n      handleSubmit = _useForm.handleSubmit;\n\n  var illustration = skin === 'dark' ? 'login-v2-dark.svg' : 'login-v2.svg',\n      source = require(\"@src/assets/images/pages/\".concat(illustration)).default;\n\n  var intervalId;\n  console.log(props);\n\n  var resend = function resend() {\n    clearInterval(intervalId);\n    setCount(30);\n    history.push('/otp');\n    axios.post(\"http://172.105.49.15:3030/api/user/check_mobile_number_exist\", {\n      mobile_number: phone // password:data.password\n\n    }).then(function (r) {\n      console.log(r);\n      setExistMobile(r);\n\n      if (r.data !== null) {\n        axios.post(\"http://172.105.49.15:3030/api/user/send_otp\", {\n          mobile_number: phone // password:data.password\n\n        }).then(function (r) {\n          console.log(r);\n        }); // props.history.push('/otp')\n\n        alert(\"We will send you a OTP to verify user\");\n      } else {// alert(\"Mobile number not exist\")\n      }\n    });\n  };\n\n  useEffect(function () {\n    axios.post(\"http://172.105.49.15:3030/api/user/check_mobile_number_exist\", {\n      mobile_number: phone // password:data.password\n\n    }).then(function (r) {\n      console.log(r);\n      setExistMobile(r);\n\n      if (r.data !== null) {\n        axios.post(\"http://172.105.49.15:3030/api/user/send_otp\", {\n          mobile_number: phone // password:data.password\n\n        }).then(function (r) {\n          console.log(r);\n        });\n        props.history.push('/otp');\n        alert(\"We will send you a OTP to verify user\");\n      } else {// alert(\"Mobile number not exist\")\n      }\n    });\n  }, [phone]);\n  useEffect(function () {\n    intervalId = setInterval(function () {\n      return setCount(function (counter) {\n        return counter - 1;\n      });\n    }, 1000);\n  }, [setCount]); // console.log(count, intervalId)\n\n  if (count === -1) {\n    // resend()\n    setCount(0);\n  }\n\n  var onSubmit = function onSubmit(data) {\n    dispatch(SendOtp(data, props)); // history.push('/forgot-password')\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"auth-wrapper auth-v2\",\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      className: \"auth-inner m-0\",\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        className: \"d-none d-lg-flex align-items-center p-5\",\n        lg: \"8\",\n        sm: \"12\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-100 d-lg-flex align-items-center justify-content-center px-5\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"img-fluid\",\n            src: source,\n            alt: \"Login V2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 7\n      }, _this), /*#__PURE__*/_jsxDEV(Col, {\n        className: \"d-flex align-items-center auth-bg px-2 p-lg-5\",\n        lg: \"4\",\n        sm: \"12\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          className: \"px-xl-2 mx-auto\",\n          sm: \"8\",\n          md: \"6\",\n          lg: \"12\",\n          children: [/*#__PURE__*/_jsxDEV(CardText, {\n            className: \"mb-2\",\n            children: \"We will send you a OTP to verify user.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(Form, {\n            className: \"auth-login-form mt-2\",\n            onSubmit: handleSubmit(onSubmit),\n            children: [/*#__PURE__*/_jsxDEV(FormGroup, {\n              children: [/*#__PURE__*/_jsxDEV(Label, {\n                className: \"form-label\",\n                for: \"login-email\",\n                children: \"Mobile Number\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 19\n              }, _this), /*#__PURE__*/_jsxDEV(Input, {\n                autoFocus: true,\n                type: \"phone\",\n                value: phone,\n                id: \"login_phone\",\n                name: \"login_phone\",\n                placeholder: \"Your Phone\",\n                onChange: function onChange(e) {\n                  return setPhone(e.target.value);\n                },\n                className: classnames({\n                  'is-invalid': errors['login_phone']\n                }),\n                innerRef: register({\n                  required: true,\n                  validate: function validate(value) {\n                    return value !== '';\n                  },\n                  pattern: {\n                    value: /^\\d{10}$/,\n                    message: \"please enter your 10 digit phone number\"\n                  }\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 19\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 13\n            }, _this), existmobile && existmobile.data && existmobile.data.mobile_number === phone ? /*#__PURE__*/_jsxDEV(FormGroup, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-between\",\n                children: /*#__PURE__*/_jsxDEV(Label, {\n                  className: \"form-label\",\n                  for: \"login-password\",\n                  children: \"OTP\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 19\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(Input, (_jsxDEV2 = {\n                value: password,\n                id: \"login_otp\",\n                name: \"login_otp\",\n                className: \"input-group-merge\",\n                placeholder: \"Enter Your OTP\",\n                onChange: function onChange(e) {\n                  return setOtp(e.target.value);\n                }\n              }, _defineProperty(_jsxDEV2, \"className\", classnames({\n                'is-invalid': errors['login_otp']\n              })), _defineProperty(_jsxDEV2, \"innerRef\", register({\n                required: true,\n                pattern: {\n                  value: /^\\d{6}$/,\n                  message: \"please enter your 6 digit otp\"\n                },\n                validate: function validate(value) {\n                  return value !== '';\n                }\n              })), _jsxDEV2), void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 17\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 94\n            }, _this) : \" \", count === 0 ? /*#__PURE__*/_jsxDEV(Button.Ripple, {\n              color: \"primary\",\n              onClick: resend,\n              block: true,\n              children: \"Resend OTP\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 31\n            }, _this) : /*#__PURE__*/_jsxDEV(Button.Ripple, {\n              type: \"submit\",\n              color: \"primary\",\n              block: true,\n              children: \"Enter OTP\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 34\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-right mt-2\",\n            children: count\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 132,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(OtpCreator, \"qUT47SeOzvolQmTIeSpaBmtKZ2o=\", false, function () {\n  return [useSkin, useDispatch, useHistory, useForm];\n});\n\n_c2 = OtpCreator;\nexport default _c3 = withRouter(OtpCreator);\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"ToastContent\");\n$RefreshReg$(_c2, \"OtpCreator\");\n$RefreshReg$(_c3, \"%default%\");","map":{"version":3,"sources":["C:/Users/Shree/Downloads/newproject/full-version/src/views/pages/authentication/Otp.js"],"names":["useState","useContext","Fragment","useEffect","classnames","Avatar","useSkin","useJwt","useDispatch","useForm","toast","Slide","SendOtp","AbilityContext","Link","useHistory","InputPasswordToggle","withRouter","getHomeRouteForLoggedInUser","isObjEmpty","Facebook","Twitter","Mail","GitHub","HelpCircle","Coffee","Alert","Row","Col","CardTitle","CardText","Form","Input","FormGroup","Label","CustomInput","Button","UncontrolledTooltip","axios","ToastContent","name","role","OtpCreator","props","skin","setSkin","ability","dispatch","history","phone","setPhone","count","setCount","password","setOtp","existmobile","setExistMobile","register","errors","handleSubmit","illustration","source","require","default","intervalId","console","log","resend","clearInterval","push","post","mobile_number","then","r","data","alert","setInterval","counter","onSubmit","e","target","value","required","validate","pattern","message"],"mappings":"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","sourcesContent":["import { useState, useContext, Fragment, useEffect } from 'react'\r\nimport classnames from 'classnames'\r\nimport Avatar from '@components/avatar'\r\nimport { useSkin } from '@hooks/useSkin'\r\nimport useJwt from '@src/auth/jwt/useJwt'\r\nimport { useDispatch } from 'react-redux'\r\nimport { useForm } from 'react-hook-form'\r\nimport { toast, Slide } from 'react-toastify'\r\nimport { SendOtp } from '@store/actions/auth'\r\nimport { AbilityContext } from '@src/utility/context/Can'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport InputPasswordToggle from '@components/input-password-toggle'\r\nimport { withRouter } from 'react-router'\r\nimport { getHomeRouteForLoggedInUser, isObjEmpty } from '@utils'\r\nimport { Facebook, Twitter, Mail, GitHub, HelpCircle, Coffee } from 'react-feather'\r\nimport {\r\n  Alert,\r\n  Row,\r\n  Col,\r\n  CardTitle,\r\n  CardText,\r\n  Form,\r\n  Input,\r\n  FormGroup,\r\n  Label,\r\n  CustomInput,\r\n  Button,\r\n  UncontrolledTooltip\r\n} from 'reactstrap'\r\nimport axios from 'axios'\r\nimport '@styles/base/pages/page-auth.scss'\r\n\r\nconst ToastContent = ({ name, role }) => (\r\n  <Fragment>\r\n    <div className='toastify-header'>\r\n      <div className='title-wrapper'>\r\n        <Avatar size='sm' color='success' icon={<Coffee size={12} />} />\r\n        <h6 className='toast-title font-weight-bold'>Welcome, {name}</h6>\r\n      </div>\r\n    </div>\r\n    <div className='toastify-body'>\r\n      <span>You have successfully logged in as an {role}. Now you can start to explore. Enjoy!</span>\r\n    </div>\r\n  </Fragment>\r\n)\r\n\r\nconst OtpCreator = props => {\r\n  const [skin, setSkin] = useSkin()\r\n  const ability = useContext(AbilityContext)\r\n  const dispatch = useDispatch()\r\n  const history = useHistory()\r\n  const [phone, setPhone] = useState('')\r\n  const [count, setCount] = useState(30)\r\n  const [password, setOtp] = useState('')\r\n  const [existmobile, setExistMobile] = useState('')\r\n// console.log(existmobile)\r\n  const { register, errors, handleSubmit } = useForm()\r\n  const illustration = skin === 'dark' ? 'login-v2-dark.svg' : 'login-v2.svg',\r\n    source = require(`@src/assets/images/pages/${illustration}`).default\r\n    let intervalId\r\n\r\nconsole.log(props)\r\n    const resend = () => {\r\n      clearInterval(intervalId)\r\n      setCount(30)\r\n    history.push('/otp')\r\n    axios.post(`http://172.105.49.15:3030/api/user/check_mobile_number_exist`, {\r\n    mobile_number:phone\r\n    // password:data.password\r\n})\r\n.then(r => { \r\n  console.log(r)\r\n  setExistMobile(r)\r\n   if (r.data !== null) {\r\n    axios.post(`http://172.105.49.15:3030/api/user/send_otp`, {\r\n      mobile_number:phone\r\n      // password:data.password\r\n  })\r\n  .then(r => {\r\n    console.log(r)\r\n  })\r\n  // props.history.push('/otp')\r\n  alert(\"We will send you a OTP to verify user\")\r\n \r\n\r\n  } else {\r\n    // alert(\"Mobile number not exist\")\r\n  }\r\n  })\r\n    }\r\n  \r\nuseEffect(() => {\r\n\r\naxios.post(`http://172.105.49.15:3030/api/user/check_mobile_number_exist`, {\r\n    mobile_number:phone\r\n    // password:data.password\r\n})\r\n.then(r => { \r\n  console.log(r)\r\n  setExistMobile(r)\r\n   if (r.data !== null) {\r\n    axios.post(`http://172.105.49.15:3030/api/user/send_otp`, {\r\n      mobile_number:phone\r\n      // password:data.password\r\n  })\r\n  .then(r => {\r\n    console.log(r)\r\n  })\r\n  props.history.push('/otp')\r\n  alert(\"We will send you a OTP to verify user\")\r\n \r\n\r\n  } else {\r\n    // alert(\"Mobile number not exist\")\r\n  }\r\n  })\r\n}, [phone])\r\nuseEffect(() => {\r\n  intervalId = setInterval(() => setCount(counter => counter - 1), 1000)\r\n}, [setCount])\r\n// console.log(count, intervalId)\r\nif (count === -1) {\r\n  // resend()\r\n  setCount(0)\r\n}\r\n  const onSubmit = data => {\r\n    dispatch(SendOtp(data, props))\r\n// history.push('/forgot-password')\r\n  }\r\n\r\n  return (\r\n    <div className='auth-wrapper auth-v2'>\r\n      <Row className='auth-inner m-0'>\r\n      <Col className='d-none d-lg-flex align-items-center p-5' lg='8' sm='12'>\r\n          <div className='w-100 d-lg-flex align-items-center justify-content-center px-5'>\r\n            <img className='img-fluid' src={source} alt='Login V2' />\r\n          </div>\r\n        </Col>\r\n        <Col className='d-flex align-items-center auth-bg px-2 p-lg-5' lg='4' sm='12'>\r\n          <Col className='px-xl-2 mx-auto' sm='8' md='6' lg='12'>\r\n            <CardText className='mb-2'>We will send you a OTP to verify user.</CardText>\r\n            <Form className='auth-login-form mt-2' onSubmit={handleSubmit(onSubmit)}>\r\n            <FormGroup>\r\n                  <Label className='form-label' for='login-email'>\r\n                   Mobile Number\r\n                  </Label>\r\n                  <Input\r\n                  autoFocus\r\n                  type='phone'\r\n                  value={phone}\r\n                  id='login_phone'\r\n                  name='login_phone'\r\n                  placeholder='Your Phone'\r\n                  onChange={e => setPhone(e.target.value)}\r\n                  className={classnames({ 'is-invalid': errors['login_phone'] })}\r\n                  innerRef={register({ \r\n                    required: true,\r\n                     validate: value => value !== '',\r\n                     pattern:{value:/^\\d{10}$/,\r\n                                message:\"please enter your 10 digit phone number\"}\r\n                               })}\r\n                />\r\n                </FormGroup>\r\n            {existmobile && existmobile.data && existmobile.data.mobile_number === phone ?   <FormGroup>\r\n                <div className='d-flex justify-content-between'>\r\n                  <Label className='form-label' for='login-password'>\r\n                    OTP\r\n                  </Label>\r\n                  {/* <Link to='/forgot-password'>\r\n                    <small>Forgot Password?</small>\r\n                  </Link> */}\r\n                </div>\r\n                <Input\r\n                  value={password}\r\n                  id='login_otp'\r\n                  name='login_otp'\r\n                  className='input-group-merge'\r\n                  placeholder=\"Enter Your OTP\"\r\n                  onChange={e => setOtp(e.target.value)}\r\n                  className={classnames({ 'is-invalid': errors['login_otp'] })}\r\n                  innerRef={register({ \r\n                    required: true,\r\n                          pattern:{value:/^\\d{6}$/,\r\n                                message:\"please enter your 6 digit otp\"},\r\n                                 validate: value => value !== '' })}\r\n                />\r\n              </FormGroup> : \" \"}\r\n              {/* <FormGroup>\r\n                <CustomInput type='checkbox' className='custom-control-Primary' id='remember-me' label='Remember Me' />\r\n              </FormGroup> */}\r\n            \r\n              {count === 0 ?  <Button.Ripple color='primary' onClick={resend} block>\r\n               Resend OTP\r\n              </Button.Ripple> : <Button.Ripple type='submit' color='primary' block>\r\n               Enter OTP\r\n              </Button.Ripple>}\r\n            </Form>\r\n            <h1 className='text-right mt-2'>{count}</h1>\r\n            <p >\r\n              {/* <span className='mr-25'>New on our platform?</span> */}\r\n              {/* <Link to='/register'> */}\r\n              {/* <Link to='/forgot-password'>\r\n                <span>Forgot Password ?</span>\r\n              </Link> */}\r\n            \r\n            </p>\r\n\r\n          </Col>\r\n        </Col>\r\n\r\n      </Row>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default withRouter(OtpCreator)"]},"metadata":{},"sourceType":"module"}